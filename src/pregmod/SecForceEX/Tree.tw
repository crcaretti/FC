:: Tree [nobr]
<<set $HSM = HSM()>> <span id="resultX">
@@.orange;Which facility or equipment do you wish to upgrade this week?@@
	<<if $Firebase < 1 || $Firebase < 2 || $Firebase < 4>><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;More firebase upgrades are required to unlock further options.<</if>>
	<<if $Firebase < 5 || $Firebase < _FirebaseU>>
		@@.green;<<link "Firebase">> <<replace "#resultX">>
			<<set $SFUpgrade = 1, $Firebase++, $cash -= Math.ceil(100000*_Env*(1.15+($SFU/10))*(1.15+($Firebase/100)))>> <<goto "Firebase">>
		<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(100000*_Env*(1.15+($SFU/10))*(1.15+($Firebase/100))))>>@@ //
	<</if>>
	<<if $Armoury < 5 || $Armoury < _ArmouryU>>
		@@.green;<<link "Armoury">> <<replace "#resultX">>
			<<set $SFUpgrade = 1, $Armoury++, $cash -= Math.ceil(40000*_Env*(1.15+($SFU/10))*(1.15+($Armoury/100)))>> <<goto "Firebase">>
		<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(40000*_Env*(1.15+($SFU/10))*(1.15+($Armoury/100))))>>@@ //
	<</if>>
	<<if $SFDrugs < 5 || $SFDrugs < _SFDrugsU>>
		@@.green;<<link "Drug Lab">> <<replace "#resultX">>
			<<set $SFUpgrade = 1, $SFDrugs++, $cash -= Math.ceil(40000*_Env*(1.15+($SFU/10))*(1.15+($SFDrugs/100)))>> <<goto "Firebase">>
		<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(40000*_Env*(1.15+($SFU/10))*(1.15+($SFDrugs/100))))>>@@ //
	<</if>>
	<<if $Firebase >= 2 && ($SFDrones < 5  || $SFDrones < _SFDronesU)>>
		@@.green;<<link "Drone bay">> <<replace "#resultX">>
			<<set $SFUpgrade = 1, $SFDrones++, $cash -= Math.ceil(45000*_Env*(1.15+($SFU/10))*(1.15+($SFDrones/100))*$HSM)>> <<goto "Firebase">>
		<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(45000*_Env*(1.15+($SFU/10))*(1.15+($SFDrones/100))*$HSM))>>@@ //
	<</if>>

	<<if $Firebase >= 1 && (_Garage < 5 ||_Garage < _GarageU)>>
	@@.green;<<link "Garage">> <<replace "#resultX">> <span id="resultY">
	"Which unit do you wish to upgrade or 'borrow'?"
	@@.green;<<link "Go back""Firebase">> <</link>>@@
		<<if ($SFVehicles < 5|| $SFVehicles < _SFVehiclesU)>>
			@@.green;<<link "Vehicle fleet">> <<replace "#resultY">>
				<<set $SFUpgrade = 1, $SFVehicles++, $cash -= Math.ceil(60000*_Env*(1.15+($SFU/10))*(1.15+($SFVehicles/100)))>> <<goto "Firebase">>
			<</replace>> <</link>>@@// @@.yellowgreen;<<print cashFormat(Math.ceil(60000*_Env*(1.15+($SFU/10))*(1.15+($SFVehicles/100))))>>@@ //
		<</if>>
		<<if $HeavyBattleTank < _HeavyBattleTankU>>
				@@.green;<<link "Heavy battle tank">> <<replace "#resultY">>
				<<set $SFUpgrade = 1, $HeavyBattleTank++, $cash -= Math.ceil(150000*_Env*(1.15+($SFU/10))*(1.15+($HeavyBattleTank/100)))>> <<goto "Firebase">>
			<</replace>> <</link>>@@// @@.yellowgreen;<<print cashFormat(Math.ceil(150000*_Env*(1.15+($SFU/10))*(1.15+($HeavyBattleTank/100))))>>@@ //
		<</if>>
	</span> <</replace>> <</link>>@@ <</if>>

	<<if $Firebase >= 4 && (_Hanger < 5 || _Hanger < _HangerU)>>
	@@.green;<<link "Hangar">> <<replace "#resultX">> <span id="resultY">
	"Which unit do you wish to upgrade or 'borrow'?"
	@@.green;<<link "Go back""Firebase">> <</link>>@@
	<<if $SFAirForce < 5 || $SFAirForce < _SFAirForceU>>
		@@.green;<<link "Aircraft fleet">> <<replace "#resultY">>
			<<set $SFUpgrade = 1, $SFAirForce++, $cash -= Math.ceil(70000*_Env*(1.15+($SFU/10))*(1.15+($SFAirForce/100)))>> <<goto "Firebase">>
		<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(70000*_Env*(1.15+($SFU/10))*(1.15+($SFAirForce/100))))>>@@ //
	<</if>>
	<<if $SpacePlane < _SpacePlaneU>>
		@@.green;<<link "Space plane">> <<replace "#resultY">>
			<<set $SFUpgrade = 1, _SpacePlane++, $cash -= Math.ceil(250000*_Env*(1.15+($SFU/10))*(1.15+($SpacePlane/100))*$HSM)>> <<goto "Firebase">>
		<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(250000*_Env*(1.15+($SFU/10))*(1.15+($SpacePlane/100))*$HSM))>>@@ //
	<</if>>
	<<if $GunS < _GunSU>>
		@@.green;<<link "Gunship">> <<replace "#resultY">>
			<<set $SFUpgrade = 1, $GunS++, $cash -= Math.ceil(350000*_Env*(1.15+($SFU/10))*(1.15+($GunS/100))*$HSM)>> <<goto "Firebase">>
		<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(350000*_Env*(1.15+($SFU/10))*(1.15+($GunS/100))*$HSM))>>@@ //
	<</if>>
	</span> <</replace>> <</link>>@@ <</if>>

	<<if (_LaunchBay < _LaunchBayU)>>
	@@.green;<<link "Launch Bay">> <<replace "#resultX">> <span id="resultY">
		"Which unit do you wish to upgrade or 'borrow'?"
		@@.green;<<link "Go back""Firebase">> <</link>>@@
			<<if $Satellite < _SatU>>
				@@.green;<<link "Satellite">> <<replace "#resultY">>
					<<set $SFUpgrade = 1, $Satellite++, $cash -= Math.ceil(525000*_Env*(1.15+($SFU/10))*(1.15+($Satellite/100))*$HSM)>> <<goto "Firebase">>
				<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(525000*_Env*(1.15+($SFU/10))*(1.15+($Satellite/100))*$HSM))>>@@ //
			<</if>>
			<<if $GiantRobot < _GiantRobotU>>
				@@.green;<<link "Giant robot">> <<replace "#resultY">>
					<<set $SFUpgrade = 1, $GiantRobot++, $cash -= Math.ceil(550000*_Env*(1.15+($SFU/10))*(1.15+($GiantRobot/100))*$HSM)>> <<goto "Firebase">>
				<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(550000*_Env*(1.15+($SFU/10))*(1.15+($GiantRobot/100))*$HSM))>>@@ //
			<</if>>
			<<if $MissileSilo < _MissileSiloU>>
					@@.green;<<link "Missile silo">> <<replace "#resultY">>
						<<set $SFUpgrade = 1, $MissileSilo++, $cash -= Math.ceil(565000*_Env*(1.15+($SFU/10))*(1.15+($MissileSilo/100))*$HSM)>> <<goto "Firebase">>
					<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(565000*_Env*(1.15+($SFU/10))*(1.15+($MissileSilo/100))*$HSM))>>@@ //
			<</if>>
	</span> <</replace>> <</link>>@@ <</if>>

	<<if _NavalYard < _NavalYardU>>
		@@.green;<<link "Naval Yard">> <<replace "#resultX">> <span id="resultY">
		"Which unit do you wish to upgrade or 'borrow'?"
			@@.green;<<link "Go back""Firebase">> <</link>>@@
			<<if $AircraftCarrier < _AircraftCarrierU>>
				@@.green;<<link "Aircraft carrier">> <<replace "#resultY">>
					<<set $SFUpgrade = 1, $AircraftCarrier++, $cash -= Math.ceil(650000*_Env*(1.15+($SFU/10))*(1.15+($AircraftCarrier/100))*$HSM)>> <<goto "Firebase">>
				<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(650000*_Env*(1.15+($SFU/10))*(1.15+($AircraftCarrier/100))*$HSM))>>@@ //
			<</if>>
			<<if $Sub < _SubU>>
				@@.green;<<link "Submarine">> <<replace "#resultY">>
					<<set $SFUpgrade = 1, $Sub++, $cash -= Math.ceil(700000*_Env*(1.15+($SFU/10))*(1.15+($Sub/100))*$HSM)>> <<goto "Firebase">>
				<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(700000*_Env*(1.15+($SFU/10))*(1.15+($Sub/100))*$HSM))>>@@ //
			<</if>>
			<<if $HAT < _HATU>>
				@@.green;<<link "Heavy amphibious transport">> <<replace "#resultY">>
					<<set $SFUpgrade = 1, $HAT++, $cash -= Math.ceil(665000*_Env*(1.15+($SFU/10))*(1.15+($Sub/100)))>> <<goto "Firebase">>
				<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(665000*_Env*(1.15+($SFU/10))*(1.15+($HAT/100))))>>@@ //
			<</if>>
			</span> <</replace>> <</link>>@@ <</if>>
</span>
/* @@.green;<<link "Support Facility">> <<replace "#resultX">>
<<set $SFUpgrade = 1, $cash -= Math.ceil( (($C*(1.15+(($SFA0/1000))*($U+.15))*_Env )>>
<<set $SFIDs = [], $SupportFacilityDecoration = "standard", $SupportFacilityNameCount = "The Support Facility", $SupportFacilityEfficiency = 0>>
<<set $SupportFacility = 5, $SupportFacilitySlaves = 0, $LieutenantColonel = 0>>
<<set $FacilitySupportSpeedUpgrades = 0, $FacilitySupportTrainingUpgrade = 0>>
<</replace>> <</link>>@@ // @@.yellowgreen;<<print cashFormat(Math.ceil(Math.ceil($C*(1.15+(($SFA0/1000)*($U+.15)*_Env)))>>@@ //*/