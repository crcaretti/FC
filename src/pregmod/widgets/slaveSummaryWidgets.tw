:: Slave Summary Widgets [nobr widget]

/* Try to use cached summary */
<<run setup.summaryCache = {}>>
<<widget "SlaveSummary">>
<<if $useSummaryCache>>
	<<set _Slave = $args[0]>>
	<<if !setup.summaryCache[_Slave.ID]>>
		<<run setup.summaryCache[_Slave.ID] = SlaveSummaryUncached($args[0])>>
	<</if>>
	<<script>>
		/*
		 * NOTE: This is for text passages only. Links inside it need to have their events re-attached
		 * Example basic code to do so:
		 * jQuery(summary).find('.link-internal').each(function() {
		 *   var el = jQuery(this);
		 *   el.ariaClick({ one : true }, () => Engine.play(el.attr('data-passage')));
		 * });
		 */
		this.output.appendChild(setup.summaryCache[State.temporary.Slave.ID].cloneNode(true))
	<</script>>
<<else>>
	<<SlaveSummaryUncached $args[0]>>
<</if>>
<</widget>>

<<widget "SlaveSummaryUncached">><<=SlaveSummaryUncached($args[0])>><</widget>>
