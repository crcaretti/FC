:: Generate XX Slave [nobr]

<<BaseSlave>>
/*missed variables - getting tired of this shit */
<<set $activeSlave.vaginaLube = 1, $activeSlave.ovaries = 1, $activeSlave.canRecruit = 1>>

<<if $activeSlaveOneTimeMaxAge > 998>>
	<<if $pedo_mode == 1>>
		<<set $activeSlaveOneTimeMaxAge = 18>>
	<<else>>
		<<set $activeSlaveOneTimeMaxAge = 42>>
	<</if>>
<<elseif $pedo_mode == 1 && $one_time_age_overrides_pedo_mode == 0 && $activeSlaveOneTimeMaxAge > 18>>
	<<set $activeSlaveOneTimeMaxAge = 18>>
<</if>>
<<if $retirementAge < $activeSlaveOneTimeMaxAge>>
	<<set $activeSlaveOneTimeMaxAge = ($retirementAge-1)>>
<</if>>
<<if $activeSlaveOneTimeMinAge < $minimumSlaveAge>>
	<<set $activeSlaveOneTimeMinAge = $minimumSlaveAge>>
<<elseif $pedo_mode == 1 && $one_time_age_overrides_pedo_mode == 0>>
	<<set $activeSlaveOneTimeMinAge = $minimumSlaveAge>>
<</if>>
<<if $activeSlaveOneTimeMaxAge < $activeSlaveOneTimeMinAge>>
	<<set $activeSlaveOneTimeMaxAge = $activeSlaveOneTimeMinAge>>
<</if>>
<<if ($activeSlaveOneTimeMaxAge >= 30) && ($FSMaturityPreferentialist != "unset")>>
	<<set $activeSlaveOneTimeMaxAge = ($activeSlaveOneTimeMaxAge + 10)>>
<</if>>
<<set $activeSlave.actualAge = random($activeSlaveOneTimeMinAge,$activeSlaveOneTimeMaxAge)>>
<<set $activeSlaveOneTimeMinAge = random($activeSlaveOneTimeMinAge,$activeSlaveOneTimeMaxAge)>>
<<if ($FSYouthPreferentialist != "unset") && ($FSYouthPreferentialist >= random (1, 100))>>
	<<set $activeSlave.actualAge = Math.min($activeSlave.actualAge, $activeSlaveOneTimeMinAge)>>
<<elseif ($FSMaturityPreferentialist != "unset") && ($FSMaturityPreferentialist >= random (1, 100))>>
	<<set $activeSlave.actualAge = Math.max($activeSlave.actualAge, $activeSlaveOneTimeMaxAge)>>
<</if>>
<<if $activeSlave.actualAge >= $retirementAge>>
	<<set $activeSlave.actualAge = ($retirementAge-2)>>
<</if>>
<<set $activeSlaveOneTimeMinAge = 0>>
<<set $activeSlaveOneTimeMaxAge = 999>>
<<set $one_time_age_overrides_pedo_mode = 0>>
<<set $activeSlave.visualAge = $activeSlave.actualAge>>
<<set $activeSlave.physicalAge = $activeSlave.actualAge>>
<<set $activeSlave.age = $activeSlave.actualAge>> /*compatibility*/
<<set $activeSlave.pubertyAgeXX = $fertilityAge>>
<<if $activeSlave.ovaries == 1>>
	<<if $activeSlave.physicalAge >= $activeSlave.pubertyAgeXX>>
		<<set $activeSlave.pubertyXX = 1>>
	<<else>>
		<<set $activeSlave.pubertyXX = 0>>
	<</if>>
<<else>>
	<<set $activeSlave.pubertyXX = 0>>
<</if>>
<<set $activeSlave.pubertyAgeXY = $potencyAge>>
<<if $activeSlave.balls > 0>>
	<<if $activeSlave.physicalAge >= $activeSlave.pubertyAgeXY>>
		<<set $activeSlave.pubertyXY = 1>>
	<<else>>
		<<set $activeSlave.pubertyXY = 0>>
	<</if>>
<<else>>
	<<set $activeSlave.pubertyXY = 0>>
<</if>>

<<set $activeSlave.ID = $IDNumber++>>
<<set $activeSlave.weekAcquired = $week>>

<<set $seed = random(1,100)>>
<<if $seed > 98>>
	<<set $activeSlave.intelligence = 3>>
<<elseif $seed > 85>>
	<<set $activeSlave.intelligence = 2>>
<<elseif $seed > 65>>
	<<set $activeSlave.intelligence = 1>>
<<elseif $seed > 35>>
	<<set $activeSlave.intelligence = 0>>
<<elseif $seed > 15>>
	<<set $activeSlave.intelligence = -1>>
<<elseif $seed > 5>>
	<<set $activeSlave.intelligence = -2>>
<<else>>
	<<set $activeSlave.intelligence = -3>>
<</if>>
<<if random(1,100) < 50+(20*$activeSlave.intelligence)>>
	<<set $activeSlave.intelligenceImplant = 1>>
<</if>>

<<if $AgePenalty == 1>>
	<<if ($activeSlave.actualAge < 16)>>
		<<set $activeSlave.career = $veryYoungCareers.random()>>
	<<elseif ($activeSlave.actualAge <= 24)>>
		<<set $activeSlave.career = $youngCareers.random()>>
	<<elseif ($activeSlave.intelligenceImplant == 1)>>
		<<set $activeSlave.career = $educatedCareers.random()>>
	<<else>>
		<<set $activeSlave.career = $uneducatedCareers.random()>>
	<</if>>
<<else>>
	<<if ($activeSlave.actualAge < 16)>>
		<<set $activeSlave.career = $veryYoungCareers.random()>>
	<<elseif ($activeSlave.intelligenceImplant == 1)>>
		<<set $activeSlave.career = $educatedCareers.random()>>
	<<elseif ($activeSlave.actualAge <= 24)>>
		<<set $activeSlave.career = $youngCareers.random()>>
	<<else>>
		<<set $activeSlave.career = $uneducatedCareers.random()>>
	<</if>>
<</if>>

<<set $activeSlave.vaginalSkill = random(0,15)>>
<<set $activeSlave.analSkill = random(0,15)>>
<<set $activeSlave.oralSkill = random(0,15)>>
<<set $activeSlave.entertainSkill = random(0,15)>>
<<set $activeSlave.whoreSkill = random(0,15)>>

<<set $activeSlave.energy = random(1,85)>>
<<RandomizeAttraction>>
<<set $activeSlave.fetishStrength = random(0,90)>>
<<set $activeSlave.fetish = either("none", "none", "none", "none", "none", "none", "none", "none", "none", "none", "none", "none", "none", "submissive", "submissive", "cumslut", "humiliation", "humiliation", "buttslut", "boobs", "pregnancy", "dom", "sadist", "masochist")>>

<<set $activeSlave.behavioralFlaw = either("none", "none", "none", "arrogant", "bitchy", "odd", "hates men", "hates women", "hates women", "anorexic", "gluttonous", "devout", "liberated")>>
<<if ($activeSlave.behavioralFlaw is "devout")>>
	<<set $activeSlave.sexualFlaw = either("none", "repressed",  "shamefast", "apathetic", "crude", "judgemental")>>
<<else>>
	<<set $activeSlave.sexualFlaw = either("none", "none", "none", "none", "hates oral", "hates anal", "hates penetration", "repressed", "idealistic", "shamefast", "apathetic", "crude", "judgemental")>>
<</if>>
<<if ($activeSlave.behavioralFlaw == "none")>>
	<<if random(1,10) == 1>>
	<<set $activeSlave.behavioralQuirk = either("confident", "cutting", "funny", "adores women", "adores men", "fitness", "insecure", "sinful", "advocate")>>
	<</if>>
<</if>>
<<if ($activeSlave.sexualFlaw == "none")>>
	<<if random(1,10) == 1>>
	<<set $activeSlave.sexualQuirk = either("gagfuck queen", "painal queen", "strugglefuck queen", "tease", "romantic", "perverted", "caring", "unflinching", "size queen")>>
	<</if>>
<</if>>

<<set $activeSlave.health = random(-50,50)>>

<<set $activeSlave.devotion = random(-90,-60)>>
<<set $activeSlave.trust = random(-45,-25)>>

/% Begin height replacement section. %/
/% Vanilla settings yield an average height of 162.5 cm, which is not representative for the world as a whole. %/
<<if random(1,2) == 1>>
	<<set $activeSlave.height = random(150,170)>>
<<else>>
	<<set $activeSlave.height = random(140,190)>>
<</if>>

/% Set height-based effects before adjusting height for nationality. %/
<<if $activeSlave.height >= 170>>
	<<set $activeSlave.hips = either(-1, 0, 0, 1, 1, 2, 2)>>
	<<set $activeSlave.shoulders = either(-1, -1, 0, 0, 0, 1)>>
<<else>>
	<<set $activeSlave.hips = either(-1, 0, 0, 0, 1, 1, 2)>>
	<<set $activeSlave.shoulders = either(-2, -1, -1, 0, 0, 1)>>
<</if>>

/% Since we use nationality for height effects we need to initialize it now instead of later on like in vanilla Free Cities. %/
<<if $fixedNationality == 0>>
	<<set $activeSlave.nationality = $nationalities.random()>>
<<else>>
	<<set $activeSlave.nationality = $fixedNationality>>
<</if>>
<<NationalityToRace $activeSlave>>
/* Corporate slavegen with race selection */
<<if passage() == "Slave Markets" && $slaveMarket == "corporate" && ($captureUpgradeRace != "unselected") && ($captureUpgradeRace != "none")>> 
	<<if $captureUpgradeRace == "mixed race">>
		<<set $activeSlave.race = "mixed race">>
	<<else>>
		<<set _capUpgradeCheck = State.variables[$captureUpgradeRace.toLowerCase().replace(/[ -]/g, '')+'Nationalities']>>
		<<set _capUpgradeNationalities = []>>
		<<for _u = 0; _u < _capUpgradeCheck.length; _u++>>
			<<set _capNation = _capUpgradeCheck[_u]>>
			<<if $nationalities.includes(_capNation)>>
				<<set _capUpgradeNationalities.push(_capNation)>>
			<</if>>
		<</for>>
		<<if _capUpgradeNationalities.length > 0>>
			<<set $activeSlave.nationality = _capUpgradeNationalities.random(), $activeSlave.race = $captureUpgradeRace>>
		<<else>>
			<<set $activeSlave.nationality = _capUpgradeCheck.random(), $activeSlave.race = $captureUpgradeRace>>
		<</if>>
	<</if>>
<</if>>
/*end Corporate slavegen with race selection */
<<NationalityToName $activeSlave>>
<<NationalityToAccent $activeSlave>>

<<set $seed = 162.5>>

<<switch $activeSlave.nationality>>
<<case "American">>
	<<if $activeSlave.race is "white">>
		<<set $seed = 165>>
	<<elseif $activeSlave.race is "black">>
		<<set $seed = 163.6>>
	<<elseif $activeSlave.race is "latina">>
		<<set $seed = 158.9>>
	<<elseif $activeSlave.race is "asian">>
		<<set $seed = 158.4>>
	<<else>>
		<<set $seed = 161.8>>
	<</if>>
<<case "Afghan">>
<<case "Argentinian">>
	<<set $seed = 159.6>>
<<case "Armenian">>
<<case "Australian">>
	<<set $seed = 161.8>>
<<case "Austrian">>
	<<set $seed = 166>>
<<case "Belarusian">>
	<<set $seed = 166.8>>
<<case "Belgian">>
<<case "Bolivian">>
	<<set $seed = 142.2>>
<<case "Brazilian">>
	<<set $seed = 158.8>>
<<case "British">>
	<<set $seed = 161.9>>
<<case "Canadian">>
	<<set $seed = 162.3>>
<<case "Chilean">>
	<<set $seed = 157.2>>
<<case "Chinese">>
	<<set $seed = 155.8>>
<<case "Colombian">>
	<<set $seed = 158.7>>
<<case "Congolese">>
	<<set $seed = 157.7>>
<<case "Cuban">>
	<<set $seed = 156>>
<<case "Czech">>
	<<set $seed = 167.22>>
<<case "Danish">>
	<<set $seed = 168.7>>
<<case "Dominican">>
	<<set $seed = 156.4>>
<<case "Dutch">>
	<<set $seed = 169>>
<<case "Emirati">>
	<<set $seed = 156.4>>
<<case "Egyptian">>
	<<set $seed = 158.9>>
<<case "Estonian">>
<<case "Ethiopian">>
<<case "Finnish">>
	<<set $seed = 165.3>>
<<case "French">>
	<<set $seed = 162.5>>
<<case "German">>
	<<set $seed = 162.8>>
<<case "Ghanan">>
	<<set $seed = 158.5>>
<<case "Greek">>
	<<set $seed = 165>>
<<case "Guatemalan">>
<<case "Haitian">>
<<case "Hungarian">>
	<<set $seed = 176>>
<<case "Icelandic">>
<<case "Indian">>
	<<set $seed = 151.9>>
<<case "Indonesian">>
<<case "Iranian">>
	<<set $seed = 157.2>>
<<case "Iraqi">>
	<<set $seed = 155.8>>
<<case "Irish">>
	<<set $seed = 163>>
<<case "Israeli">>
	<<set $seed = 166>>
<<case "Italian">>
<<case "Jamaican">>
	<<set $seed = 160.8>>
<<case "Japanese">>
	<<set $seed = 158>>
<<case "Jordanian">>
<<case "Kazakh">>
<<case "Kenyan">>
<<case "Korean">>
	<<if either(1,2,3) == 3>>
		<<set $seed = 154.9>>
	<<else>>
		<<set $seed = 157.4>>
	<</if>>
<<case "Lebanese">>
<<case "Libyan">>
<<case "Lithuanian">>
	<<set $seed = 167.5>>
<<case "Malaysian">>
	<<set $seed = 154.7>>
<<case "Malian">>
	<<set $seed = 160.4>>
<<case "Mexican">>
	<<set $seed = 154>>
<<case "Moroccan">>
<<case "Nepalese">>
<<case "Nigerian">>
	<<set $seed = 163.8>>
<<case "Norwegian">>
	<<set $seed = 157.8>>
<<case "Omani">>
<<case "Pakistani">>
	/% Default to India's figures. %/
	<<set $seed = 151.9>>
<<case "Peruvian">>
	<<set $seed = 151>>
<<case "Polish">>
	<<set $seed = 165.1>>
<<case "Portuguese">>
	<<set $seed = 165.1>>
<<case "Puerto Rican">>
	/% Use average for U.S. Hispanics. %/
	<<set $seed = 158.9>>
<<case "Romanian">>
	<<set $seed = 157>>
<<case "Russian">>
	<<set $seed = 164.1>>
<<case "Saudi">>
	<<set $seed = 156.3>>
<<case "Scottish">>
	<<set $seed = 163>>
<<case "Serbian">>
	<<set $seed = 166.8>>
<<case "Slovak">>
	<<set $seed = 165.6>>
<<case "Spanish">>
	<<set $seed = 162.6>>
<<case "Sudanese">>
<<case "Swedish">>
	<<set $seed = 166.8>>
<<case "Swiss">>
<<case "Tanzanian">>
<<case "Thai">>
<<case "Tunisian">>
<<case "Turkish">>
	<<set $seed = 161.9>>
<<case "Ugandan">>
<<case "Ukrainian">>
<<case "Uzbek">>
<<case "Venezuelan">>
<<case "Vietnamese">>
	<<set $seed = 155.2>>
<<case "Yemeni">>
<<case "a New Zealander">>
	<<set $seed = 164>>
<<case "Zimbabwean">>
<<default>>
<</switch>>

/% Include adjustment factor for age. %/
<<if $activeSlave.physicalAge <= 13>>
  <<set $seed = interpolate(2,85,13,$seed * 157/164.0,$activeSlave.physicalAge)>>
<<elseif $activeSlave.physicalAge < 20>>
  <<set $seed = interpolate(13,$seed * 157/164.0,20,$seed,$activeSlave.physicalAge)>>
<</if>>

/% Adjust height and convert from decimal number to integer. %/
<<set $activeSlave.height = Math.round($activeSlave.height * $seed / 162.5)>>
/% End height replacement section. %/

<<set $activeSlave.weight = random(-100, 100)>>
<<if ($activeSlave.weight < -30)>>
	<<set $activeSlave.waist = random(-55,0)>>
<<elseif ($activeSlave.weight <= 30)>>
	<<set $activeSlave.waist = random(-45,45)>>
<<elseif $activeSlave.physicalAge < 13>>
	<<set $activeSlave.waist = random(-25,25)>>
<<else>>
	<<set $activeSlave.waist = random(0,55)>>
<</if>>

<<if ($activeSlave.physicalAge > random(0,100))>>
	<<set $activeSlave.eyes = -1>>
	<<if random(0,100) > 90>>
		<<set $activeSlave.eyes = -2>>
	<</if>>
<</if>>


<<if ($activeSlave.intelligenceImplant == 1) && ($activeSlave.accent >= 3) && (3+$activeSlave.intelligence) > random(0, 6)>>
	<<set $activeSlave.accent -= 1>>
<</if>>

<<set $seed = 4+$activeSlave.intelligence+$activeSlave.intelligenceImplant>>
<<if "American" == $activeSlave.nationality>>
	<<set $seed += 2>>
<<elseif ["Canadian", "Israeli", "Japanese", "Korean", "Irish", "Icelandic", "Finnish", "Swiss", "Danish", "Norwegian", "Austrian", "Slovak", "Dutch", "Belgian", "Czech", "Portuguese", "Hungarian", "Portuguese", "Estonian", "Polish", "Lithuanian", "Romanian", "German", "Swedish", "French", "Italian", "Spanish", "British", "Australian", "a New Zealander"].includes($activeSlave.nationality)>>
<<else>>
	<<set $seed -= 2>>
<</if>>
<<if random(1,$seed) == 1>>
	<<set $activeSlave.teeth = "crooked">>
<</if>>

<<switch $activeSlave.race>>
<<case "black">>
	<<set $activeSlave.butt = either(1, 2, 2, 3, 3, 4, 4)>>
	<<set $activeSlave.boobs = BoobGenerator.rollBreast(150)>>
	<<set $activeSlave.lips = random(5,30)>>
	<<set $activeSlave.skin = either("black", "brown", "light brown")>>
	<<set $activeSlave.hColor = either("black", "black", "black", "brown")>>
	<<set $activeSlave.hStyle = either("neat", "crinkled")>>
<<case "white">>
	<<set $activeSlave.butt = either(1, 2, 2, 3, 3, 4)>>
	<<set $activeSlave.boobs = BoobGenerator.rollBreast(50)>>
	<<set $activeSlave.lips = random(5,25)>>
	<<if $activeSlave.nationality is "German">>
		<<set $activeSlave.skin = either("pale", "tanned", "fair")>>
		<<set $activeSlave.eyeColor = either("blue", "blue", "blue", "brown", "green")>>
		<<set $activeSlave.hColor = either("black", "blonde", "blonde", "blonde", "red", "brown")>>
	<<elseif $activeSlave.nationality is "Icelandic">>
		<<set $activeSlave.skin = either("pale", "pale", "tanned", "fair")>>
		<<set $activeSlave.eyeColor = either("blue", "blue", "blue", "brown", "green")>>
		<<set $activeSlave.hColor = either("black", "blonde", "blonde", "blonde", "red", "brown")>>
	<<elseif $activeSlave.nationality is "Irish">>
		<<set $activeSlave.skin = either("pale", "pale", "tanned", "fair")>>
		<<set $activeSlave.eyeColor = either("blue", "brown", "green", "green", "green")>>
		<<set $activeSlave.hColor = either("black", "blonde", "red", "red", "red", "brown")>>
	<<elseif $activeSlave.nationality == "Scottish">>
		<<set $activeSlave.skin = either("pale", "fair", "tanned", "fair")>>
		<<set $activeSlave.eyeColor = either("blue", "brown", "brown", "green", "green", "green")>>
		<<set $activeSlave.hColor = either("black", "black", "blonde", "red", "red", "red", "brown")>>
	<<else>>
		<<set $activeSlave.skin = either("pale", "tanned", "fair")>>
		<<set $activeSlave.eyeColor = either("blue", "brown", "green")>>
		<<set $activeSlave.hColor = either("black", "blonde", "red", "brown")>>
	<</if>>
	<<set $activeSlave.hStyle = "neat">>
<<case "latina">>
	<<set $activeSlave.butt = either(1, 2, 2, 3, 3, 4)>>
	<<set $activeSlave.boobs = BoobGenerator.rollBreast(0)>>
	<<set $activeSlave.lips = random(5,25)>>
	<<set $activeSlave.skin = either("olive", "brown", "light brown")>>
	<<set $activeSlave.hColor = either("black", "black", "brown", "brown")>>
	<<set $activeSlave.hStyle = "neat">>
<<case "indo-aryan" "malay" "pacific islander" "amerindian">>
	<<set $activeSlave.butt = either(1, 2, 2, 3, 3)>>
	<<set $activeSlave.boobs = BoobGenerator.rollBreast(0)>>
	<<set $activeSlave.lips = random(5,25)>>
	<<set $activeSlave.skin = either("dark", "light")>>
	<<set $activeSlave.hColor = either("black")>>
	<<set $activeSlave.hStyle = "neat">>
<<case "asian">>
	<<set $activeSlave.butt = either(1, 2, 2, 3, 3)>>
	<<set $activeSlave.boobs = BoobGenerator.rollBreast(-100)>>
	<<set $activeSlave.lips = random(5,25)>>
	<<set $activeSlave.skin = either("pale", "dark", "light")>>
	<<set $activeSlave.hColor = either("black")>>
	<<set $activeSlave.hStyle = "neat">>
<<case "middle eastern" "semitic" "southern European">>
	<<set $activeSlave.butt = either(1, 2, 2, 3, 3)>>
	<<set $activeSlave.boobs = BoobGenerator.rollBreast(0)>>
	<<set $activeSlave.lips = random(5,25)>>
	<<set $activeSlave.skin = either("pale", "dark", "light")>>
	<<set $activeSlave.hColor = either("black")>>
	<<set $activeSlave.hStyle = "neat">>
<<default>>
	<<set $activeSlave.butt = either(1, 2, 2, 3, 3, 4)>>
	<<set $activeSlave.boobs = BoobGenerator.rollBreast(0)>>
	<<set $activeSlave.lips = random(5,25)>>
	<<set $activeSlave.skin = either("pale", "dark", "light")>>
	<<set $activeSlave.hColor = either("black", "black", "black", "black", "brown", "brown", "blonde", "red")>>
	<<set $activeSlave.hStyle = "neat">>
<</switch>>
<<if ($activeSlave.skin == "pale") || ($activeSlave.skin == "fair")>>
	<<if random(1,4) == 1>>
	<<set $activeSlave.markings = either("freckles", "freckles", "freckles", "heavily freckled", "beauty mark", "beauty mark", "birthmark", "birthmark")>>
	<</if>>
<<elseif random(1,8) == 1>>
	<<set $activeSlave.markings = either("beauty mark", "birthmark")>>
<</if>>

<<set $activeSlave.origEye = $activeSlave.eyeColor>>
<<set $activeSlave.origHColor = $activeSlave.hColor>>
<<set $activeSlave.pubicHColor = $activeSlave.hColor>>
<<set $activeSlave.pubicHStyle = either("hairless", "bald", "bald", "waxed", "waxed", "waxed", "waxed", "waxed", "waxed", "in a strip", "in a strip", "in a strip", "in a strip", "in a strip", "neat", "neat", "neat", "neat", "neat", "bushy in the front and neat in the rear", "bushy in the front and neat in the rear", "bushy in the front and neat in the rear", "bushy in the front and neat in the rear", "bushy", "bushy", "bushy", "bushy", "bushy")>>
<<set $activeSlave.underArmHColor = $activeSlave.hColor>>
<<set $activeSlave.underArmHStyle = either("hairless", "bald", "bald", "waxed", "waxed", "waxed", "waxed", "shaved", "shaved", "shaved", "shaved", "shaved", "neat", "neat", "neat", "neat", "neat", "bushy", "bushy", "bushy")>>
<<if ($activeSlave.pubicHStyle == "hairless" || $activeSlave.underArmHStyle == "hairless") && random(1,100) > 40>>
	<<set $activeSlave.pubicHStyle = "hairless", $activeSlave.underArmHStyle = "hairless">>
<</if>>
<<set $seed = []>>
<<if $activeSlave.boobs > 250 && $activeSlave.boobs < 800>>
	<<set $seed.push("perky")>>
	<<set $seed.push("downward-facing")>>
<</if>>
<<if $activeSlave.boobs > 400 && $activeSlave.boobs < 1200>>
	<<set $seed.push("torpedo-shaped")>>
	<<set $seed.push("wide-set")>>
<</if>>
<<if $activeSlave.boobs > 800 && $activeSlave.physicalAge > random(10,50)>>
	<<set $seed.push("saggy")>>
<</if>>
<<if $seed.length == 1>>
	<<if random(1,2) != 1>>
	<<set $activeSlave.boobShape = $seed.random()>>
	<</if>>
<<elseif $seed.length > 1>>
	<<if random(1,3) != 1>>
	<<set $activeSlave.boobShape = $seed.random()>>
	<</if>>
<</if>>

<<set $activeSlave.earPiercing = either(0,1)>>
<<set $activeSlave.nosePiercing = either(0,0,0,1)>>
<<set $activeSlave.eyebrowPiercing = either(0,0,0,0,0,1)>>
<<set $activeSlave.clitPiercing = either(0,0,0,0,0,1)>>
<<set $activeSlave.lipsPiercing = either(0,0,0,0,0,1)>>
<<set $activeSlave.navelPiercing = either(0,0,0,1)>>
<<set $activeSlave.nipplesPiercing = either(0,0,0,1)>>

<<set $activeSlave.face = random(-60,60)>>
<<if random(0,2) == 1>><<set $activeSlave.face = random(-10,10)>><</if>>
<<if $activeSlave.physicalAge > 40>>
	<<set $activeSlave.face -= random(0,20)>>
<<elseif $activeSlave.physicalAge > 35>>
	<<set $activeSlave.face -= random(0,10)>>
<<elseif $activeSlave.physicalAge <= 20>>
	<<set $activeSlave.face += random(0,20)>>
<<elseif $activeSlave.physicalAge <= 25>>
	<<set $activeSlave.face += random(0,10)>>
<</if>>
<<if $activeSlave.physicalAge > 10>>
	<<set $activeSlave.faceShape = either("androgynous", "cute", "sensual", "exotic", "normal", "normal")>>
<<else>>
	<<set $activeSlave.faceShape = either("androgynous", "androgynous", "cute", "cute", "sensual", "exotic", "normal", "normal")>>
<</if>>
<<switch $activeSlave.faceShape>>
<<case "sensual" "cute">>
	<<set $activeSlave.face += random(0,20)>>
<<case "exotic" "androgynous">>
	<<set $activeSlave.face += random(-10,10)>>
<<case "masculine">>
	<<set $activeSlave.face += random(-10,0)>>
<</switch>>

<<if ($weightAffectsAssets != 0)>>
	<<if $activeSlave.weight < -10 && $activeSlave.butt > 1>>
		<<set $activeSlave.butt -= 1>>
	<<elseif $activeSlave.weight > 10 && $activeSlave.butt < 4>>
		<<set $activeSlave.butt += 1>>
	<</if>>

	<<if $activeSlave.weight < -10 && $activeSlave.boobs > 200>>
		<<set $activeSlave.boobs -= 100>>
	<</if>>
<</if>>

<<if $activeSlave.boobs < 250>>
	<<set $activeSlave.nipples = either("tiny", "tiny", "tiny", "tiny", "cute", "cute", "puffy", "partially inverted")>>
<<elseif $activeSlave.boobs < 500>>
	<<set $activeSlave.nipples = either("tiny", "cute", "cute", "cute", "puffy", "partially inverted")>>
<<elseif $activeSlave.boobs < 1000>>
	<<set $activeSlave.nipples = either("tiny", "cute", "cute", "cute", "puffy", "puffy", "partially inverted", "inverted")>>
<<else>>
	<<set $activeSlave.nipples = either("cute", "puffy", "partially inverted", "inverted", "huge")>>
<</if>>

<<set $activeSlave.vagina = either(0, 0, 1, 1, 1)>>
<<if $activeSlave.actualAge < 20>>
	<<set $activeSlave.vagina = either(0, 1)>>
<</if>>
<<if $activeSlave.actualAge > 30>>
	<<set $activeSlave.vagina = either(1, 1, 1, 1, 2)>>
<</if>>
<<if $activeSlave.vagina == 0>>
	<<set $activeSlave.vaginalSkill = 0>>
<</if>>
<<if $activeSlave.energy < random(1,80)>>
	<<set $activeSlave.vaginaLube = 0>>
<<elseif $activeSlave.physicalAge > random(35,60)>>
	<<set $activeSlave.vaginaLube = 0>>
<</if>>

<<set $activeSlave.clit = either(0, 0, 0, 0, 0, 0, 1, 1, 2)>>
<<set $activeSlave.labia = either(0, 0, 0, 1, 1, 1, 1, 2, 2, 3)>>
<<set $activeSlave.foreskin = random(0,4)>>

<<set $activeSlave.voice = either(1, 2, 2, 2, 2, 2, 2, 3, 3, 3)>>

<<set $activeSlave.anus = either(0, 0, 1, 1, 2)>>
<<set $activeSlave.analArea = $activeSlave.anus + either(0, 0, 0, 1)>>

<<if $activeSlave.anus == 0>>
	<<set $activeSlave.analSkill = 0>>
<<elseif random(1,4) == 1>>
	<<set $activeSlave.anusTat = "bleached">>
<</if>>

/%pedoshit%/
<<if $activeSlave.physicalAge <= 11>>
  <<set $activeSlave.hips = either(-2, -2, -1, -1, 0)>>
<<elseif $activeSlave.physicalAge <= 13>>
  <<set $activeSlave.hips = either(-2, -1, -1, 0, 1)>>
<</if>>
<<if $activeSlave.physicalAge <= 13>>
	<<set $activeSlave.vagina = either(0, 0, 0, 0, 0, 0, 0, 1)>>
<<elseif $activeSlave.physicalAge <= 15>>
	<<set $activeSlave.vagina = either(0, 0, 0, 0, 0, 1, 1)>>
<<elseif $activeSlave.physicalAge <= 17>>
	<<set $activeSlave.vagina = either(0, 0, 0, 1, 1, 1)>>
<</if>>

<<if $activeSlave.vagina == 0>>
	<<set $activeSlave.vaginalSkill = 0>>
<</if>>

<<if ($activeSlave.physicalAge <= 10)>>
	<<set $activeSlave.boobs = either(100)>>
<<elseif ($activeSlave.physicalAge == 11)>>
	<<set $activeSlave.boobs = either(100, 100, 150, 150, 150, 300)>>
<<elseif ($activeSlave.physicalAge == 12)>>
	<<set $activeSlave.boobs = either(100, 100, 150, 150, 150, 200, 200, 300)>>
<<elseif ($activeSlave.physicalAge == 13)>>
	<<set $activeSlave.boobs = either(100, 150, 200, 200, 300, 300, 300, 400)>>
<<elseif ($activeSlave.physicalAge == 14)>>
	<<set $activeSlave.boobs = either(100 ,150, 200, 300, 300, 300, 350, 400, 400)>>
<<elseif ($activeSlave.physicalAge == 15)>>
	<<set $activeSlave.boobs = either(150 ,200, 300, 300, 300, 350, 350, 350, 400, 400, 450, 450)>>
<</if>>

<<if ($activeSlave.physicalAge <= 11)>>
	<<set $activeSlave.clit = either(0, 0, 0, 0, 0, 0, 0, 0, 1)>>
<<elseif ($activeSlave.physicalAge <= 13)>>
	<<set $activeSlave.clit = either(0, 0, 0, 0, 0, 0, 0, 1, 1)>>
<<elseif ($activeSlave.physicalAge <= 15)>>
	<<set $activeSlave.clit = either(0, 0, 0, 0, 0, 0, 0, 1, 2)>>
<</if>>

<<if ($activeSlave.physicalAge <= 11)>>
	<<set $activeSlave.labia = either(0, 0, 0, 0, 0, 0, 0, 1, 1)>>
<<elseif ($activeSlave.physicalAge <= 12)>>
	<<set $activeSlave.labia = either(0, 0, 0, 0, 0, 0, 1, 1, 1)>>
<<elseif ($activeSlave.physicalAge <= 13)>>
	<<set $activeSlave.labia = either(0, 0, 0, 0, 0, 1, 1, 1, 1)>>
<<elseif ($activeSlave.physicalAge <= 14)>>
	<<set $activeSlave.labia = either(0, 0, 0, 0, 1, 1, 1, 1, 2)>>
<<elseif ($activeSlave.physicalAge <= 15)>>
	<<set $activeSlave.labia = either(0, 0, 0, 1, 1, 1, 1, 2, 2)>>
<</if>>

<<if ($activeSlave.physicalAge <= 11)>>
	<<set $activeSlave.butt = either(1, 1, 1, 1, 1, 1, 1)>>
<<elseif ($activeSlave.physicalAge <= 12)>>
	<<set $activeSlave.butt = either(1, 1, 1, 1, 1, 2, 2)>>
<<elseif ($activeSlave.physicalAge <= 13)>>
	<<set $activeSlave.butt = either(1, 1, 1, 1, 2, 2, 2)>>
<<elseif ($activeSlave.physicalAge <= 14)>>
	<<set $activeSlave.butt = either(1, 1, 1, 2, 2, 2, 3)>>
<<elseif ($activeSlave.physicalAge <= 15)>>
	<<set $activeSlave.butt = either(1, 1, 2, 2, 2, 2, 3)>>
<</if>>

<<if ($activeSlave.physicalAge <= 13)>>
	<<set $activeSlave.voice = either(2, 2, 2, 3, 3, 3, 3, 3, 3)>>
<<elseif ($activeSlave.physicalAge <= 16)>>
	<<set $activeSlave.voice = either(2, 2, 2, 2, 2, 3, 3, 3, 3)>>
<</if>>

<<if passage() == "Slave Markets" && $slaveMarket == "corporate">>
	<<if ($captureUpgradeRace != "unselected") && ($captureUpgradeRace != "none")>>
	<<if $activeSlave.race != $captureUpgradeRace>>
        <<set $slaveMarket = "corporate">>
        <<goto "Slave Markets">>
	<</if>>
	<</if>>
<</if>>
