:: Brothel Report [nobr]


<<set $brothelSlaves = 0, $legendaryWhoreID = 0, _brothelBonuses = 0, $slim = 0, $stacked = 0, $modded = 0, $unmodded = 0, $pure = 0, $implanted = 0, $XX = 0, $XY = 0, $young = 0, $old = 0, _profits = 0, _madamFetish = 0, $madamCashBonus = 0, _SL = $slaves.length, _MDM = -1>>
<<set $legendaryWombID = 0>>
<<set $pregYes to 0>>
<<set $pregNo to 0>>

<!-- Statistics gathering -->
<<set $facility = $facility || {}>>
<<set $facility.brothel = $facility.brothel || {}>>
<<set $facility.brothel.adsIncome = 0>>
<<set $facility.brothel.income = new Map()>>

<<for _i to 0; _i < _SL; _i++>>
<<if ($slaves[_i].assignment is "work in the brothel")>>
	<<if $seeImages == 1>><<SlaveArt $slaves[_i] 0 0>><</if>>
	<<set $brothelSlaves++>>
<</if>>
<<if ($Madam != 0)>>
<<if ($slaves[_i].ID == $Madam.ID)>>

/* 000-250-006 */
/* <<if $seeImages == 1>><<SlaveArt $slaves[_i] 0 0>><</if>> */
<<if $seeImages == 1>>
    <div class="imageRef tinyImg">
    <<SlaveArt $slaves[$i] 0 0>>
</div>
<</if>>
/* 000-250-006 */

	<<set _MDM = _i>>
<</if>>
<</if>>
<</for>>

<<if ($Madam != 0) && (_MDM != -1)>>
	<<set $i = _MDM>>
	<<silently>>
	<<include "SA long term effects">>
	<<include "SA relationships">>
	<<include "SA rivalries">>
	<</silently>>
	<<if ($slaves[_MDM].health < -80)>>
	<<set $slaves[_MDM].health += 20>>
	<<elseif $slaves[_MDM].health < -40>>
	<<set $slaves[_MDM].health += 15>>
	<<elseif $slaves[_MDM].health < 0>>
	<<set $slaves[_MDM].health += 10>>
	<<elseif $slaves[_MDM].health < 90>>
	<<set $slaves[_MDM].health += 7>>
	<</if>>
	<<if $slaves[_MDM].devotion <= 45>>
	<<set $slaves[_MDM].devotion += 5>>
	<</if>>
	<<if $slaves[_MDM].trust < 45>>
	<<set $slaves[_MDM].trust += 5>>
	<</if>>
	<<if $slaves[_MDM].fetishStrength <= 95>>
	<<if $slaves[_MDM].fetish != "dom">>
		<<fetishChangeChance $slaves[_MDM]>>
		<<if $fetishChangeChance > random(0,100)>>
			<<set _madamFetish to 1>>
			<<set $slaves[_MDM].fetishKnown to 1>>
			<<set $slaves[_MDM].fetish to "dom">>
		<</if>>
	<<elseif $slaves[_MDM].fetishKnown == 0>>
		<<set _madamFetish to 1>>
		<<set $slaves[_MDM].fetishKnown to 1>>
	<<else>>
		<<set _madamFetish to 2>>
		<<set $slaves[_MDM].fetishStrength += 4>>
	<</if>>
	<</if>>
	<<set $Madam = $slaves[_MDM]>> /% BUGFIX! This is needed as it's the slaves[var] that holds the newest relationship info if anything has changed not the Madam variable. %/
$Madam.slaveName is serving as the madam.<<if $Madam.relationship is -3>> As your wife, she does her best to attract attention to your brothel.<</if>>
<<if (_madamFetish == 1)>>
	She isn't above sampling the merchandise herself; before long it's obvious to her girls that she @@color:lightcoral;really likes fucking them.@@
<<elseif (_madamFetish == 2)>>
	She's careful that all of the whores under her supervision are all warmed up and ready to get fucked every morning, and she @@color:lightsalmon;becomes more dominant.@@
<</if>>
<<set $oldCash to $cash>>
<<if $Madam.relationship is -3>>
	<<set $madamCashBonus += 0.25>>
<</if>>
<<if ($Madam.whoreSkill <= 10)>>
	Though $Madam.slaveName does her best to manage the brothel, with her lack of skill she can do little.
<<elseif ($Madam.whoreSkill <= 30)>>
	$Madam.slaveName's basic skills marginally @@color:yellowgreen;improve@@ business at $brothelName.
	<<set $madamCashBonus += 0.05>>
<<elseif ($Madam.whoreSkill <= 60)>>
	$Madam.slaveName's skills @@color:yellowgreen;improve@@ business at $brothelName.
	<<set $madamCashBonus += 0.1>>
<<elseif ($Madam.whoreSkill < 100)>>
	$Madam.slaveName's skills greatly @@color:yellowgreen;improve@@ business at $brothelName.
	<<set $madamCashBonus += 0.15>>
<<else>>
	$Madam.slaveName's mastery immensely @@color:yellowgreen;improves@@ business at $brothelName.
	<<set $madamCashBonus += 0.20>>
<</if>>
<<if ($Madam.actualAge > 35)>>
	Her age and experience also contribute.
	<<set $madamCashBonus += 0.05>>
<</if>>
<<if $madamCareers.contains($Madam.career)>>
	She has experience from her life before she was a slave that helps her in the seedy business of selling other people's bodies for sex.
	<<set $madamCashBonus += 0.05>>
<</if>>
<<if ($Madam.intelligence > 0)>>
	She is a clever manager.
	<<set $madamCashBonus += 0.05*$Madam.intelligence>>
<</if>>
<<if ($Madam.dick > 2) && (canAchieveErection($Madam)) && (canPenetrate(_MDM))>>
	Her turgid dick helps her manage the bitches.
	<<set $madamCashBonus += 0.05>>
<</if>>
<<for _i = 0; _i < _SL; _i++>>
<<if $slaves[_i].assignment != "work in the brothel">><<continue>><</if>>
<<if $familyTesting == 1>>
	<<if $slaves[_i].mother == $Madam.ID>>
		She pays special attention to her daughter, $slaves[_i].slaveName, making sure she is treated well and showing off her skills.
		<<set $slaves[_i].trust += 1>>
		<<set $madamCashBonus += 0.05>>
	<</if>>
	<<if $slaves[_i].father == $Madam.ID>>
		She pays special attention to her daughter, $slaves[_i].slaveName, making sure she is treated well and showing off her skills.
		<<set $slaves[_i].trust += 1>>
		<<set $madamCashBonus += 0.05>>
	<</if>>
	<<if $slaves[_i].ID == $Madam.father>>
		She pays special attention to her father, $slaves[_i].slaveName, making sure she is treated well and showing off her skills.
		<<set $slaves[_i].trust += 1>>
		<<set $madamCashBonus += 0.05>>
	<</if>>
	<<if $slaves[_i].ID == $Madam.mother>>
		She pays special attention to her mother, $slaves[_i].slaveName, making sure she is treated well and showing off her skills.
		<<set $slaves[_i].trust += 1>>
		<<set $madamCashBonus += 0.05>>
	<</if>>
	<<if areSisters($slaves[_i], $Madam) == 1>>
		She pays special attention to her twin sister, $slaves[_i].slaveName, making sure she is treated well and showing off her skills.
		<<set $slaves[_i].trust += 1>>
		<<set $madamCashBonus += 0.05>>
	<<elseif areSisters($slaves[_i], $Madam) == 2>>
		She pays special attention to her sister, $slaves[_i].slaveName, making sure she is treated well and showing off her skills.
		<<set $slaves[_i].trust += 1>>
		<<set $madamCashBonus += 0.05>>
	<<elseif areSisters($slaves[_i], $Madam) == 3>>
		She pays special attention to her half-sister, $slaves[_i].slaveName, making sure she is treated well and showing off her skills.
		<<set $slaves[_i].trust += 1>>
		<<set $madamCashBonus += 0.05>>
	<</if>>
<<else>>
<<if $Madam.relationTarget is $slaves[_i].ID>>
	She pays special attention to her $slaves[_i].relation, $slaves[_i].slaveName, making sure she is treated well and showing off her skills.
	<<set $slaves[_i].trust += 1>>
	<<set $madamCashBonus += 0.05>>
<</if>>
<</if>> /*closes extended family mode*/
<<if $Madam.relationshipTarget is $slaves[_i].ID>>
	She dotes over her <<if $Madam.relationship == 1>>friend<<elseif $Madam.relationship is 2>>best friend<<elseif $Madam.relationship is 3>>friend with benefits<<elseif $Madam.relationship is 4>>lover<<elseif $Madam.relationship is 5>>slave wife<</if>>, $slaves[_i].slaveName, making sure she is safe, but unfortunately driving potential costumers away from her.
	<<set $slaves[_i].devotion += 1>>
	<<set $madamCashBonus -= 0.05>>
<</if>>
<<if $Madam.rivalryTarget is $slaves[_i].ID>>
	She forces her <<if $Madam.rivalry == 1>>growing rival<<elseif $Madam.rivalry is 2>>rival<<elseif $Madam.rivalry is 3>>bitter rival<</if>>, $slaves[_i].slaveName, to service all the men in the brothel.
	<<set $slaves[_i].devotion -= 2>>
	<<set $slaves[_i].trust -= 2>>
	<<if canDoVaginal($slaves[_i])>>
		<<set $slaves[_i].vaginalCount += 10>>
		<<set $vaginalTotal += 10>>
		<<if $slaves[_i].publicCount>><<set $slaves[_i].publicCount += 10>><<else>><<set $slaves[_i].publicCount to 10>><</if>>
	<</if>>
	<<if canDoAnal($slaves[_i])>>
		<<set $slaves[_i].analCount += 10>>
		<<set $analTotal += 10>>
		<<if $slaves[_i].publicCount>><<set $slaves[_i].publicCount += 10>><<else>><<set $slaves[_i].publicCount to 10>><</if>>
	<</if>>
	<<set $slaves[_i].oralCount += 10>>
	<<set $oralTotal += 10>>
	<<if $slaves[_i].publicCount>><<set $slaves[_i].publicCount += 10>><<else>><<set $slaves[_i].publicCount to 10>><</if>>
	<<if random(1,100) > 65>>
		<<set $slaves[_MDM].rivalry += 1, $Madam.rivalry += 1>>
		<<set $slaves[_i].rivalry += 1>>
	<</if>>
<</if>>
<<if $slaves[_i].prestigeDesc is "She is a famed Free Cities whore, and commands top prices.">>
	She makes sure to promote $slaves[_i].slaveName, the famed whore, in order to capitalize on her popularity.
	<<set $madamCashBonus += 0.15>>
<</if>>
<<if $slaves[_i].prestigeDesc is "She is a famed Free Cities slut, and can please anyone.">>
	She makes sure to promote $slaves[_i].slaveName, the famed entertainer, in order to capitalize on her popularity.
	<<set $madamCashBonus += 0.15>>
<</if>>
<<if $slaves[_i].prestigeDesc is "She is remembered for winning best in show as a dairy cow.">>
	She makes sure to massage $slaves[_i].slaveName's huge breasts to get the milk flowing before enticing clients to suckle and play with her.
	<<set $madamCashBonus += 0.10>>
<</if>>
<<if $slaves[_i].prestigeDesc is "She is remembered for winning best in show as a cockmilker.">>
	She shows off $slaves[_i].slaveName's copious loads by putting a condom over her dick and teasing her till she bursts it.  The show draws multiple clients that want to play with her oversized junk and messy orgasms.
	<<set $madamCashBonus += 0.15>>
<</if>>
<<if $slaves[_i].prestigeDesc is "She is remembered for winning best in show as a breeder." && $slaves[$i].preg > 10>>
	She makes sure $slaves[_i].slaveName's growing pregnancy is well taken care of, even if it means driving away potential customers away when the mother-to-be needs a rest.
	<<set $madamCashBonus -= 0.05>>
<</if>>
<<if $slaves[_i].prestigeDesc is "She is remembered for winning best in show as a breeder.">>
	She makes sure to play off $slaves[_i].slaveName's fame and fertility by enticing potential customers to be the one to claim her womb by filling it with their child.
	<<set $madamCashBonus += 0.15>>
<</if>>
<</for>>

<<set _profits += $cash-$oldCash>>
<<if ($brothelSlaves < 5)>>
	<<set $slavesGettingHelp to 0>>
	<<if $universalRulesFacilityWork == 1>>
	<<for _i to 0; _i < _SL; _i++>>
		<<if ($slaves[_i].assignment is "whore")>>
		<<set $slavesGettingHelp++>>
		<</if>>
	<</for>>
	<</if>>
	<<if ($brothelSlaves+$slavesGettingHelp < 5)>>
	<<set $oldCash to $cash>>
	<<set $i = _MDM>>
	<<silently>><<include "SA whore">><</silently>>
	<<set $Madam = $slaves[_MDM]>> /% Keep Madam and her slaves[$i] in sync %/
	<<set _seed to $cash-$oldCash>>
	<<set $cash += Math.trunc(0.5*_seed)>>
	<<set _seed = Math.trunc(1.5*_seed)>>
	Since she doesn't have enough whores to manage to keep her busy, she sees $beauty customers herself, earning you @@color:yellowgreen;¤_seed@@. She can charge more for her time, since many citizens find it erotic to fuck the Madam.
	<<set _profits += _seed>>
	<<set $facility.brothel.income.get($slaves[_MDM].ID).income += _seed>>
	<</if>>
<</if>>
/% Add the some costs if not done above (if the Madam doesn't whore herself out) %/
<<if !$facility.brothel.income.has($Madam.ID)>>
	<<run $facility.brothel.income.set($Madam.ID, {ID: $Madam.ID, slaveName: $Madam.slaveName, customLabel: $Madam.customLabel, customers: 0, income: 0, adsIncome: 0, rep: 0, cost: getSlaveCost($Madam)})>>
<</if>>
<</if>>

<br>
<<if $brothelSlaves > 0>>

	<<set $possibleBonuses to 0>>
	<<if $seeImages == 1>><br style="clear:both" /><</if>>
	<<if $brothelSlaves == 1>>''There is one slave whore working out of $brothelName.''<<else>>''There are $brothelSlaves slave whores working out of $brothelName.''<</if>>

<<for _i to 0; _i < _SL; _i++>>
	<<if ($slaves[_i].assignment != "work in the brothel")>><<continue>><</if>>
	<<if ($legendaryWombID == 0) && ($slaves[_i].amp != 1) && ($slaves[_i].preg > 30) && ($slaves[_i].pregType < 50) && ($slaves[_i].eggType == "human") && ($slaves[_i].births > 10) && ($slaves[_i].devotion > 50) && ($slaves[_i].prestige == 0)>>
	<<set $legendaryWombID to $slaves[_i].ID>>
	<</if>>
	<<if ($legendaryWhoreID == 0) && ($slaves[_i].whoreSkill >= 100) && ($slaves[_i].devotion > 50) && ($slaves[_i].prestige == 0)>>
	<<set $legendaryWhoreID to $slaves[_i].ID>>
	<</if>>
	<<set $i = _i>>
	<<silently>>
	<<if ($brothelUpgradeDrugs == 1)>>
	<<set $slaves[_i].health += 3>>
	<<set $slaves[_i].aphrodisiacs = 2>>
	<<include "SA drugs">>
	<</if>>
	<<if ($brothelUpgradeHealth == 1)>>
	<<set $slaves[_i].health += 10>>
	<</if>>
	<<set $oldCash to $cash>>
	<<include "SA whore">>
	<<if $brothelAdsSpending != 0>>
	<<set _seed to 0>>
	<<if $brothelAdsStacked == 1>>
		<<if ($slaves[_i].butt > 4) && ($slaves[_i].boobs > 800)>>
		<<set _seed++>>
		<</if>>
	<<elseif $brothelAdsStacked is -1>>
		<<if ($slaves[_i].boobs < 500) && ($slaves[_i].butt < 3) && ($slaves[_i].weight <= 10) && ($slaves[_i].muscles <= 95)>>
		<<set _seed++>>
		<</if>>
	<</if>>
	<<set _PierceC = ($slaves[_i].lipsPiercing + $slaves[_i].nipplesPiercing + $slaves[_i].vaginaPiercing + $slaves[_i].clitPiercing + $slaves[_i].anusPiercing + $slaves[_i].earPiercing + $slaves[_i].eyebrowPiercing + $slaves[_i].nosePiercing + $slaves[_i].navelPiercing)>>
	<<if $brothelAdsModded == 1>>
		<<if _PierceC > 8>>
		<<if ($slaves[_i].lipsTat != 0) && ($slaves[_i].buttTat != 0) && ($slaves[_i].anusTat != 0) && ($slaves[_i].vaginaTat != 0) && ($slaves[_i].boobsTat != 0)>>
			<<set _seed++>>
		<</if>>
		<</if>>
	<<elseif $brothelAdsModded is -1>>
		<<if _PierceC < 3>>
		<<if ($slaves[_i].lipsTat == 0) && ($slaves[_i].buttTat == 0) && ($slaves[_i].vaginaTat == 0) && ($slaves[_i].boobsTat == 0)>>
			<<set _seed++>>
		<</if>>
		<</if>>
	<</if>>
	<<if $brothelAdsPreg == 1>>
		<<if ($slaves[$i].preg > 10) || ($slaves[$i].bellyImplant >= 4000)>>
			<<set _seed++>>
		<</if>>
	<<elseif $brothelAdsPreg == -1>>
		<<if ($slaves[$i].pregType < 10) && ($slaves[$i].preg < 1) && ($slaves[$i].weight < 30) && (!$fakeBellies.contains($bellyAccessory)) && ($slaves[$i].bellyImplant == 0) && ($slaves[$i].inflation == 0)>>
			<<set _seed++>>
		<</if>>
	<</if>>
	<<if $brothelAdsImplanted == 1>>
		<<if ($slaves[_i].boobsImplant > 0) && ($slaves[_i].buttImplant > 0) && ($slaves[_i].waist > 0) && ($slaves[_i].lipsImplant > 0) && ($slaves[$i].bellyImplant > 0)>>
			<<set _seed++>>
		<</if>>
	<<elseif $brothelAdsImplanted is -1>>
		<<if ($slaves[_i].boobsImplant == 0) && ($slaves[_i].buttImplant == 0) && ($slaves[_i].waist < 2) && ($slaves[_i].lipsImplant == 0) && ($slaves[_i].faceImplant < 2) &&  ($slaves[$i].bellyImplant == 0)>>
			<<set _seed++>>
		<</if>>
	<</if>>
	<<if $brothelAdsOld == 1>>
		<<if ($slaves[_i].physicalAge >= 30)>>
		<<set _seed++>>
		<</if>>
	<<elseif $brothelAdsOld is -1>>
		<<if ($slaves[_i].physicalAge < 30) && ($slaves[_i].physicalAge >= 18)>>
		<<set _seed++>>
		<</if>>
	<<elseif $brothelAdsOld is -2>>
		<<if ($slaves[_i].physicalAge <= 18) && ($slaves[_i].physicalAge >= 13)>>
		<<set $seed++>>
		<</if>>
	<<elseif $brothelAdsOld is -3>>
		<<if ($slaves[_i].physicalAge < 13)>>
		<<set $seed++>>
		<</if>>
	<</if>>
	<<if $brothelAdsXX == 1>>
		<<if ($slaves[_i].dick == 0)>>
		<<set _seed++>>
		<</if>>
	<<elseif $brothelAdsXX is -1>>
		<<if ($slaves[_i].dick > 0)>>
		<<set _seed++>>
		<</if>>
	<</if>>
	<<if _seed > 0>>
		<<set _adsIncome = _seed * random(50,60) * Math.trunc($brothelAdsSpending/1000)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.income.get($slaves[_i].ID).adsIncome += _adsIncome>>
	<<else>>
		<<set _adsIncome = random(50,60) * Math.trunc($brothelAdsSpending/1000)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.income.get($slaves[_i].ID).adsIncome += _adsIncome>>
	<</if>>
	<</if>>
	<<set _profits += $cash-$oldCash>>
	<<include "SA long term effects">>
	<<include "SA relationships">>
	<<include "SA rivalries">>
	<</silently>>
	<<if ($slaves[_i].health < -80)>>
	<<set $slaves[_i].health += 20>>
	<<elseif $slaves[_i].health < -40>>
	<<set $slaves[_i].health += 15>>
	<<elseif $slaves[_i].health < 0>>
	<<set $slaves[_i].health += 10>>
	<<elseif $slaves[_i].health < 90>>
	<<set $slaves[_i].health += 7>>
	<</if>>
	<<if ($slaves[_i].devotion <= 20) && ($slaves[_i].trust > -20)>>
	<<set $slaves[_i].devotion -= 5>>
	<<set $slaves[_i].trust -= 5>>
	<<elseif ($slaves[_i].devotion < 45)>>
	<<set $slaves[_i].devotion += 4>>
	<<elseif ($slaves[_i].devotion >= 50)>>
	<<set $slaves[_i].devotion -= 4>>
	<</if>>
	<<if ($slaves[_i].trust < 30)>>
	<<set $slaves[_i].trust += 5>>
	<</if>>
	<<if $slaves[_i].energy > 40 && $slaves[_i].energy < 95>>
	<<set $slaves[_i].energy += 1>>
	<</if>>
<</for>>

	<<set $oldCash to $cash>>
	<<if $brothelAdsSpending != 0>>
	An ad campaign is supporting business there, and whores that match it make more ¤.
	<</if>>
	<<if ($arcologies[0].FSAssetExpansionist is "unset") && ($arcologies[0].FSSlimnessEnthusiast is "unset")>>
	<<if ($brothelAdsSpending == 0) || ($brothelAdsStacked == 0)>>
		<<set $possibleBonuses += 1>>
		<<if ($slim > 0) && ($stacked > 0) && (Math.abs($slim-$stacked) <= ($brothelSlaves/3))>>
		<<set _adsIncome = $brothelSlaves*random(20,30)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.adsIncome += _adsIncome>>
		<<set _brothelBonuses += 1>>
		The brothel offers a @@color:yellowgreen;wide@@ variety of slim and stacked slaves.
		<</if>>
	<</if>>
	<</if>>
	<<if ($arcologies[0].FSRepopulationFocus is "unset") && ($arcologies[0].FSRestart is "unset")>>
	<<if ($brothelAdsSpending == 0) || ($brothelAdsPreg == 0)>>
		<<set $possibleBonuses += 1>>
		<<if ($pregYes > 0) && ($pregNo > 0) && (Math.abs($pregYes-$pregNo) <= ($brothelSlaves/3))>>
		<<set _adsIncome = $brothelSlaves*random(20,30)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.adsIncome += _adsIncome>>
		<<set _brothelBonuses += 1>>
		The brothel offers a @@color:yellowgreen;wide@@ variety  of slaves with big bellies and slaves with flat bellies.
		<</if>>
	<</if>>
	<</if>>
	<<if ($arcologies[0].FSDegradationist is "unset") && ($arcologies[0].FSBodyPurist is "unset")>>
	<<if ($brothelAdsSpending == 0) || ($brothelAdsModded == 0)>>
		<<set $possibleBonuses += 1>>
		<<if ($modded > 0) && ($unmodded > 0) && (Math.abs($modded-$unmodded) <= ($brothelSlaves/3))>>
		<<set _adsIncome = $brothelSlaves*random(20,30)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.adsIncome += _adsIncome>>
		<<set _brothelBonuses += 1>>
		The brothel offers a @@color:yellowgreen;both@@ heavily pierced and tattooed slaves and slaves with more natural bodies.
		<</if>>
	<</if>>
	<</if>>
	<<if ($arcologies[0].FSTransformationFetishist is "unset") && ($arcologies[0].FSBodyPurist is "unset")>>
	<<if ($brothelAdsSpending == 0) || ($brothelAdsImplanted == 0)>>
		<<set $possibleBonuses += 1>>
		<<if ($implanted > 0) && ($pure > 0) && (Math.abs($implanted-$pure) <= ($brothelSlaves/3))>>
		<<set _adsIncome = $brothelSlaves*random(20,30)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.adsIncome += _adsIncome>>
		<<set _brothelBonuses += 1>>
		The brothel offers @@color:yellowgreen;both@@ all-natural girls, and slaves whose beauty has been improved by surgical means.
		<</if>>
	<</if>>
	<</if>>
	<<if $seeDicks != 0>>
	<<if ($brothelAdsSpending == 0) || ($brothelAdsXX == 0)>>
		<<set $possibleBonuses += 1>>
		<<if ($XX > 0) && ($XY > 0) && (Math.abs($XX-$XY) <= ($brothelSlaves/3))>>
		<<set _adsIncome = $brothelSlaves*random(20,30)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.adsIncome += _adsIncome>>
		<<set _brothelBonuses += 1>>
		The brothel offers a @@color:yellowgreen;mix@@ of whores that can appeal to varied tastes in genitalia.
		<</if>>
	<</if>>
	<</if>>
	<<if ($arcologies[0].FSMaturityPreferentialist is "unset") && ($arcologies[0].FSYouthPreferentialist is "unset")>>
	<<if ($brothelAdsSpending == 0) || ($brothelAdsOld == 0)>>
		<<set $possibleBonuses += 1>>
		<<if ($young > 0) && ($old > 0) && (Math.abs($young-$old) <= ($brothelSlaves/3))>>
		<<set _adsIncome = $brothelSlaves*random(20,30)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.adsIncome += _adsIncome>>
		<<set _brothelBonuses += 1>>
		The brothel offers girls @@color:yellowgreen;both@@ young and mature.
		<</if>>
	<</if>>
	<</if>>

	<<if ($possibleBonuses > 0)>>
	<<if (_brothelBonuses >= $possibleBonuses)>>
		<<set _adsIncome = $brothelSlaves*random(40,60)>>
		<<set $cash += _adsIncome>>
		<<set $facility.brothel.adsIncome += _adsIncome>>
		There is a ''@@color:yellowgreen;perfect variety@@'' of slave whores working in the brothel.
	<</if>>
	<</if>>

	<<set _profits += $cash-$oldCash>>
	<!-- Record statistics gathering -->
	<<script>>
		var b = State.variables.facility.brothel;
		b.whoreIncome = 0;
		b.customers = 0;
		b.whoreCosts = 0;
		b.rep = 0;
		for(var si of b.income.values()) {
			b.whoreIncome += si.income + si.adsIncome;
			b.customers += si.customers;
			b.whoreCosts += si.cost;
			b.rep += si.rep;
		}
		b.adsCosts = State.variables.brothelAdsSpending;
		b.maintenance = State.variables.brothel * State.variables.facilityCost * (1.0 + 0.2 * State.variables.brothelUpgradeDrugs);
		b.totalIncome = b.whoreIncome + b.adsIncome;
		b.totalExpenses = b.whoreCosts + b.adsCosts + b.maintenance;
		b.profit = b.totalIncome - b.totalExpenses;
	<</script>>
	$brothelNameCaps makes you @@color:yellowgreen;¤_profits@@ this week.

	<<if $brothel < $brothelSlaves>>
	<<set $brothelSpots to 0>>
	<<else>>
	<<set $brothelSpots to $brothel - $brothelSlaves>>
	<</if>>

	<<if $brothelDecoration != "standard">>
	$brothelNameCaps's customers enjoy @@color:green;fucking whores in $brothelDecoration surroundings.@@
	<</if>>

	<!-- Statistics output -->
	<<BrothelStatistics 0>>
<<else>>
	''$brothelNameCaps is empty.''
	<<set $brothelSpots to $brothel>>
<</if>>
<br><br>

/% Gotta keep the facility bosses Vars in sync with their respective $slaves[var], or relationships and/or rivalries in the least can get messed up. Since the FacBass vars get wiped out every week the rivalry here would be different since it was originally only updating $Madam and not also the $slaves[madam]. I think all facilities do this and also some events. %/
