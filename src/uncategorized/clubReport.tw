:: Club Report [nobr]

<span id="clubstats">
</span>

<<SlaveSort $ClubiIDs>>
<<set _DL = $ClubiIDs.length, $clubSlaves = _DL, _SL = $slaves.length, $clubBonuses = 0, $DJRepBonus = 0, $legendaryEntertainerID = 0, _FLsFetish = 0>>
<<set $legendaryWombID = 0>>
<<set _implanted =0, _modded = 0, _old = 0, _pure = 0, _slim = 0, _stacked = 0, _unmodded = 0, _XX = 0, _XY = 0, _young = 0, _pregYes = 0, _pregNo = 0, _minBonus = 50, _maxBonus = 150>>

<!-- Statistics gathering; income is rep boosts in numbers, and profit will be rep per cash unit, or cash unit per rep -->
<<set $facility = $facility || {}, $facility.club = initFacilityStatistics($facility.club)>>

<<if $DJ != 0>>
	<<set _FLs = $slaves.findIndex(function(s) { return s.ID == $DJ.ID; })>>

	<<if ($slaves[_FLs].health < -80)>>
		<<set $slaves[_FLs].health += 20>>
	<<elseif $slaves[_FLs].health < -40>>
		<<set $slaves[_FLs].health += 15>>
	<<elseif $slaves[_FLs].health < 0>>
		<<set $slaves[_FLs].health += 10>>
	<<elseif $slaves[_FLs].health < 90>>
		<<set $slaves[_FLs].health += 7>>
	<</if>>
	<<if $slaves[_FLs].devotion <= 60>>
		<<set $slaves[_FLs].devotion += 5>>
	<</if>>
	<<if $slaves[_FLs].trust < 60>>
		<<set $slaves[_FLs].trust += 3>>
	<</if>>
	<<if $slaves[_FLs].fetishStrength <= 95>>
		<<if $slaves[_FLs].fetish != "humiliation">>
			<<fetishChangeChance $slaves[_FLs]>>
			<<if $fetishChangeChance > random(0,100)>>
				<<set _FLsFetish = 1, $slaves[_FLs].fetishKnown = 1, $slaves[_FLs].fetish = "humiliation">>
			<</if>>
		<<elseif $slaves[_FLs].fetishKnown == 0>>
			<<set _FLsFetish = 1, $slaves[_FLs].fetishKnown = 1>>
		<<else>>
			<<set _FLsFetish = 2, $slaves[_FLs].fetishStrength += 4>>
		<</if>>
	<</if>>
	<<if $slaves[_FLs].livingRules != "luxurious">>
		<<set $slaves[_FLs].livingRules = "luxurious">>
	<</if>>
	/% Make sure we have registered living expenses as for any other slave %/
	<<run getSlaveStatisticData($DJ, $facility.club)>>
	<<set $DJ = $slaves[_FLs]>>
	&nbsp;&nbsp;&nbsp;&nbsp;<<SlaveFullName $DJ>> is performing as the DJ.
	<<if $DJ.relationship == -3 && $DJ.devotion > 50>>
		She tries her best to be your energetic, cheerful wife.
		<<set $DJRepBonus += 0.1>>
	<</if>>
	<<if (_FLsFetish == 1)>>
		She's expected to be the innovative, beautiful DJ spinning beats one minute, and come out of her booth to grind on the floor the next; she enjoys the interplay, and finds greater @@.lightcoral;pleasure in exhibitionism.@@
	<<elseif (_FLsFetish == 2)>>
		Every day she gets to enjoy hundreds of stares on her skin, and @@.lightsalmon;becomes more of an exhibitionist.@@
	<</if>>
	<<if ($DJ.eyes == -2)>>
		Her lack of eyesight doesn't slow her down; rather, it strengthens her other senses. Her tracks have a distinct sound, since she experiences noise as her sight.
		<<set $DJRepBonus += 0.15>>
	<</if>>
	<<if ($DJ.entertainSkill <= 10)>>
		Though $DJ.slaveName does her best to lead on the club, with her lack of skill she can do little.
	<<elseif ($DJ.entertainSkill <= 30)>>
		$DJ.slaveName's basic skills marginally @@.green;improve@@ the atmosphere on $clubName.
		<<set $DJRepBonus += 0.05>>
	<<elseif ($DJ.entertainSkill <= 60)>>
		$DJ.slaveName's skills @@.green;improve@@ the atmosphere on $clubName.
		<<set $DJRepBonus += 0.1>>
	<<elseif ($DJ.entertainSkill < 100)>>
		$DJ.slaveName's skills greatly @@.green;improve@@ the atmosphere on $clubName.
		<<set $DJRepBonus += 0.15>>
	<<elseif ($DJ.entertainSkill >= 100)>>
		$DJ.slaveName's mastery immensely @@.green;improves@@ the atmosphere on $clubName.
		<<set $DJRepBonus += 0.20>>
	<</if>>
	<<if ($DJ.muscles > 5) && ($DJ.muscles <= 95)>>
		Her toned body helps her lead her fellow club girls by letting her dance all night.
		<<set $DJRepBonus += 0.05>>
	<</if>>
	<<if ($DJ.intelligence > 0)>>
		She's smart enough to make an actual contribution to the music, greatly enhancing the entire experience.
		<<set $DJRepBonus += 0.05*$DJ.intelligence>>
	<</if>>
	<<if ($DJ.face > 95)>>
		Her great beauty is a further draw, even when she's in her DJ booth, but especially when she comes out to dance.
		<<set $DJRepBonus += 0.05>>
	<</if>>
	<<if setup.DJCareers.includes($DJ.career)>>
		She has musical experience from her life before she was a slave, a grounding that gives her tracks actual depth.
		<<set $DJRepBonus += 0.05>>
	<<elseif $DJ.skillDJ >= $masteredXP>>
		She has musical experience from working for you, giving her tracks actual depth.
		<<set $DJRepBonus += 0.05>>
	<<else>>
		<<set $slaves[_FLs].skillDJ += random(1,($DJ.intelligence+4)*2)>>
	<</if>>
	<<if (_DL < 10)>>
		<<set $slavesGettingHelp = 0>>
		<<if $universalRulesFacilityWork == 1>>
			<<for $i = 0; $i < _SL; $i++>>
				<<if ($slaves[$i].assignment == "serve the public")>>
					<<set $slavesGettingHelp++>>
				<</if>>
			<</for>>
		<</if>>
		<<if (_DL+$slavesGettingHelp < 10)>>
			<<set $i = _FLs>> /* apply following SA passages to facility leader */
			<<if ($legendaryEntertainerID == 0) && ($slaves[_FLs].prestige == 0) && ($slaves[_FLs].entertainSkill >= 100) && ($slaves[_FLs].devotion > 50)>>
				<<set $legendaryEntertainerID = $slaves[_FLs].ID>>
			<</if>>
			<<if $showEWD != 0>>
				<br>&nbsp;&nbsp;&nbsp;&nbsp;She <<include "SA serve the public">>
			<<else>>
				<<silently>><<include "SA serve the public">><</silently>>
			<</if>>
			<<set $repGain += Math.trunc(($beauty*$FResult)*(1+(0.003*$slaves[_FLs].entertainSkill))*0.1*0.5)>>
			<br>&nbsp;&nbsp;&nbsp;&nbsp;Since she doesn't have enough sluts in $clubName to make it worthwhile for her to be on stage 24/7, she spends her extra time slutting it up herself. She has sex with $beauty citizens, @@.green;pleasing them immensely,@@ since it's more appealing to fuck the DJ than some club slut.
		<</if>>
	<</if>>
	<<if (_DL > 0)>><br><br><</if>>
<</if>>

<<if (_DL > 0)>>
	<<set _possibleBonuses = 0>>
	&nbsp;&nbsp;&nbsp;&nbsp;<<if (_DL != 1)>>''The _DL slaves pleasing citizens in $clubName''<<else>>''The one slave pleasing citizens in $clubName''<</if>> worked hard to @@.green;increase your reputation@@ this week.
<</if>>

<<if ($DJ != 0)>>
	<<set $i = _FLs>> /* apply following SA passages to facility leader */
	<<if $showEWD != 0>>
		<br><br>
		/* 000-250-006 */
		<<if $seeImages && $seeReportImages>>
		<div class="imageRef tinyImg">
			<<SlaveArt $slaves[_FLs] 0 0>>
		</div>
		<</if>>
		/* 000-250-006 */
		''__@@.pink;<<SlaveFullName $slaves[_FLs]>>@@__'' is performing as the DJ in $clubName.
		<br>&nbsp;&nbsp;&nbsp;
		<<include "SA chooses own clothes">>
		<<include "SA rules">>
		<<include "SA diet">>
		<<include "SA long term effects">>
		<<include "SA drugs">>
		<<include "SA relationships">>
		<<include "SA rivalries">>
		<br><<include "SA devotion">>
	<<else>>
		<<silently>>
		<<include "SA chooses own clothes">>
		<<include "SA rules">>
		<<include "SA diet">>
		<<include "SA long term effects">>
		<<include "SA drugs">>
		<<include "SA relationships">>
		<<include "SA rivalries">>
		<<include "SA devotion">>
		<</silently>>
	<</if>>
	<<set $DJ = $slaves[_FLs]>>
	<<if isSlim($slaves[_FLs])>>
		<<set _slim += 1>>
	<</if>>
	<<if isStacked($slaves[_FLs])>>
		<<set _stacked += 1>>
	<</if>>
	<<if isYoung($slaves[_FLs])>>
		<<set _young += 1>>
	<<else>>
		<<set _old += 1>>
	<</if>>
	<<if isModded($slaves[_FLs])>>
		<<set _modded += 1>>
	<<elseif isUnmodded($slaves[_FLs])>>
		<<set _unmodded += 1>>
	<</if>>
	<<if isXY($slaves[_FLs])>>
		<<set _XY += 1>>
	<<else>>
		<<set _XX += 1>>
	<</if>>
	<<if isPure($slaves[_FLs])>>
		<<set _pure += 1>>
	<<else>>
		<<set _implanted += 1>>
	<</if>>
	<<if isPreg($slaves[_FLs])>>
		<<set _pregYes += 1>>
	<<elseif isNotPreg($slaves[_FLs])>>
		<<set _pregNo += 1>>
	<</if>>
<</if>>

<<if (_DL > 0)>>
	<<for _dI = 0; _dI < _DL; _dI++>>
		<<set $i = $slaveIndices[$ClubiIDs[_dI]]>>
		<<if ($legendaryEntertainerID == 0) && ($slaves[$i].prestige == 0) && ($slaves[$i].entertainSkill >= 100) && ($slaves[$i].devotion > 50)>>
			<<set $legendaryEntertainerID = $slaves[$i].ID>>
		<</if>>
		<<if ($legendaryWombID == 0) && ($slaves[$i].amp != 1) && ($slaves[$i].preg > 30) && ($slaves[$i].pregType < 50) && ($slaves[$i].eggType == "human") && ($slaves[$i].births > 10) && ($slaves[$i].devotion > 50) && ($slaves[$i].prestige == 0)>>
			<<set $legendaryWombID = $slaves[$i].ID>>
		<</if>>
		<<if ($slaves[$i].devotion <= 20) && ($slaves[$i].trust > -20)>>
			<<set $slaves[$i].devotion -= 5, $slaves[$i].trust -= 5>>
		<<elseif ($slaves[$i].devotion < 45)>>
			<<set $slaves[$i].devotion += 4>>
		<<elseif ($slaves[$i].devotion >= 50)>>
			<<set $slaves[$i].devotion -= 4>>
		<</if>>

		<<if ($slaves[$i].trust < 30)>>
			<<set $slaves[$i].trust += 5>>
		<</if>>

		<<if ($slaves[$i].health < -80)>>
			<<set $slaves[$i].health += 20>>
		<<elseif ($slaves[$i].health < -40)>>
			<<set $slaves[$i].health += 15>>
		<<elseif ($slaves[$i].health < 0)>>
			<<set $slaves[$i].health += 10>>
		<<elseif ($slaves[$i].health < 90)>>
			<<set $slaves[$i].health += 7>>
		<</if>>

		<<if $slaves[$i].livingRules != "normal">>
			<<set $slaves[$i].livingRules = "normal">>
		<</if>>
		
		<<if $showEWD != 0>>
			<br><br>
			/* 000-250-006 */
			<<if $seeImages && $seeReportImages>>
			<div class="imageRef tinyImg">
				<<SlaveArt $slaves[$i] 0 0>>
			</div>
			<</if>>
			/* 000-250-006 */
			''__@@.pink;<<SlaveFullName $slaves[$i]>>@@__''
			<<if $slaves[$i].choosesOwnAssignment == 2>>
				<<include "SA chooses own job">>
			<<else>>
				is serving in $clubName.
			<</if>>
			<br>&nbsp;&nbsp;&nbsp;&nbsp;She <<include "SA serve the public">>
			<br>&nbsp;&nbsp;&nbsp;
			<<include "SA chooses own clothes">>
			<<include "SA rules">>
			<<include "SA diet">>
			<<include "SA long term effects">>
			<<include "SA drugs">>
			<<include "SA relationships">>
			<<include "SA rivalries">>
			<br><<include "SA devotion">>
		<<else>>
			<<silently>>
			<<include "SA chooses own job">>
			<<include "SA serve the public">>
			<<include "SA chooses own clothes">>
			<<include "SA rules">>
			<<include "SA diet">>
			<<include "SA long term effects">>
			<<include "SA drugs">>
			<<include "SA relationships">>
			<<include "SA rivalries">>
			<<include "SA devotion">>
			<</silently>>
		<</if>>
		<<if isSlim($slaves[$i]) == true>>
			<<set _slim += 1>>
		<</if>>
		<<if isStacked($slaves[$i]) == true>>
			<<set _stacked += 1>>
		<</if>>
		<<if isYoung($slaves[$i]) == true>>
			<<set _young += 1>>
		<<else>>
			<<set _old += 1>>
		<</if>>
		<<if isModded($slaves[$i]) == true>>
			<<set _modded += 1>>
		<<elseif isUnmodded($slaves[$i]) == true>>
			<<set _unmodded += 1>>
		<</if>>
		<<if isXY($slaves[$i]) == true>>
			<<set _XY += 1>>
		<<else>>
			<<set _XX += 1>>
		<</if>>
		<<if isPure($slaves[$i]) == true>>
			<<set _pure += 1>>
		<<else>>
			<<set _implanted += 1>>
		<</if>>
		<<if isPreg($slaves[$i]) == true>>
			<<set _pregYes += 1>>
		<<elseif isNotPreg($slaves[$i]) == true>>
			<<set _pregNo += 1>>
		<</if>>
	<</for>>

	<br><br>&nbsp;&nbsp;&nbsp;
	<<if $clubAdsSpending != 0>>
		An ad campaign is getting citizens into the club every night, and sluts that match it gratify patrons.
		
		<br>
		
		<<if $clubAdsStacked == 1>>
			Its advertisements feature stacked girls.
			<<set _ads = 1>>
		<<elseif $clubAdsStacked == -1>>
			Its advertisements feature slim girls.
			<<set _ads = -1>>
		<<else>>
			Its advertisements feature a variety of girls, some that are slim and some others that are stacked.
			<<set _ads = 0>>
		<</if>>
	<</if>>

    <<if ($arcologies[0].FSAssetExpansionist != "unset") && ($arcologies[0].FSAssetExpansionist >= 80)>>
		Most customers prefer stacked girls.
		<<set _pref = 1>>
	<<elseif  ($arcologies[0].FSSlimnessEnthusiast != "unset") && ($arcologies[0].FSSlimnessEnthusiast >= 80) >>
		Most customers prefer slim girls.
		<<set _pref = -1>>
	<<else>>
    	<<if ($arcologies[0].FSAssetExpansionist == "unset") && ($arcologies[0].FSSlimnessEnthusiast == "unset")>>
        	<<if ($clubAdsSpending == 0) || ($clubAdsStacked == 0)>>
        		<<set _possibleBonuses++>>
        		<<if (_slim > 0) && (_stacked > 0) && (Math.abs(_slim-_stacked) <= (_DL/3))>>
        		<<set $repGain += _DL*random(5,10), $clubBonuses++>>
        		There is a @@.green;wide@@ variety of slim and stacked slaves working the club.
        		<</if>>
        	<</if>>
    	<</if>>
    	Most customers don't have preferences for either slim or stacked slaves.
		<<set _pref = 0>>
    <</if>>
    <<if (_slim > (_DL/2))>>
		<<set _girls = -1>>
		Most of the the slaves in the club are slim.<br>
	<<elseif (_stacked > (_DL/2))>>
		<<set _girls = 1>>
		Most of the the slaves in the club are stacked.<br>
	<<elseif (_slim > 0) && (_stacked > 0) && (Math.abs(_slim-_stacked) <= (_DL/3))>>
		<<set _girls = 0>>
		The slaves in the club vary in slimness.<br>
	<</if>>
	<<if _pref == 0>> /*customers don't care*/
	<<elseif ($clubAdsSpending > 0)>>
		<<if (_ads == _pref) && (_girls == _ads)>>
			<<set _adsIncome = _DL*random(20,30), $cash += _adsIncome, $facility.club.adsIncome += _adsIncome, _clubBonuses++>>
			Its advertising for <<if _ads == 1>>stacked <<elseif _ads == -1>>slim <</if>>girls matched most customers' preferences and the girls in the club matched its advertisements. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<elseif (_ads == _pref) && (_girls != _ads)>>
			Its advertising for <<if _ads == 1>>stacked <<elseif _ads == -1>>slim <</if>>girls matched most customers preferences, but the girls in the club did not. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<<elseif (_girls == _pref) && (_girls != _ads)>>
			The <<if _girls == 1>>stacked <<elseif _girls == -1>>slim <</if>>girls in the club did not match its advertisements, but since the girls in the club matched most customers preferences for <<if _pref == 1>>stacked <<elseif _pref == -1>>slim <</if>>girls, your reputation was not affected.
		<<elseif (_girls != _pref)>>
			Some customers were put off since the <<if _girls == 1>>stacked <<elseif _girls == -1>>slim <</if>>girls there did not match their preferences for <<if _pref == 1>>stacked <<elseif _pref == -1>>slim <</if>>girls. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<<else>>	
		<<if (_girls == _pref)>>
			The <<if _girls == 1>>stacked <<elseif _girls == -1>>slim <</if>>girls in the club match most customers' preferences for <<if _pref == 1>>stacked <<elseif _pref == -1>>slim <</if>>girls. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<else>>
			Some customers were put off since the <<if _girls == 1>>stacked <<elseif _girls == -1>>slim <</if>>girls there did not match their preferences for <<if _pref == 1>>stacked <<elseif _pref == -1>>slim <</if>>girls. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<</if>>

    <<if ($clubAdsSpending > 0)>>
		<<if $clubAdsModded == 1>>
			Its advertisements feature girls that are heavily pierced and tattooed.
			<<set _ads = 1>>
		<<elseif $clubAdsModded == -1>>
			Its advertisements feature girls that free from piercings and tattoos.
			<<set _ads = -1>>
		<<else>>
			Its advertisements feature some girls that are tattooed and pierced, and some that aren't.
			<<set _ads = 0>>
		<</if>>
	<</if>>
    <<if ($arcologies[0].FSDegradationist != "unset") && ($arcologies[0].FSDegradationist >= 80)>>
		Most customers prefer heavily pierced and tattoed girls.
		<<set _pref = 1>>
	<<elseif ($arcologies[0].FSBodyPurist != "unset") && ($arcologies[0].FSBodyPurist >= 80) >>
		Most customers prefer natural girls.
		<<set _pref = -1>>
	<<else>>
    	<<if ($arcologies[0].FSDegradationist == "unset") && ($arcologies[0].FSBodyPurist == "unset")>>
        	<<if ($clubAdsSpending == 0) || ($clubAdsModded == 0)>>
        		<<set _possibleBonuses++>>
        		<<if (_modded > 0) && (_unmodded > 0) && (Math.abs(_modded-$unmodded) <= (_DL/3))>>
        		<<set $repGain += _DL*random(5,10), $clubBonuses++>>
        		There are @@.green;both@@ heavily pierced and tattooed slaves and slaves with more natural bodies filling the club.
        		<</if>>
        	<</if>>
    	<</if>>
    	Most customers don't have preferences for either natural or heavily body modded girls.
		<<set _pref = 0>>
	<</if>>
	<<if (_modded > (_DL/2))>>
		<<set _girls = -1>>
		Most of the the slaves in the club are heavily pierced and tattoed.<br>
	<<elseif (_unmodded > (_DL/2))>>
		<<set _girls = 1>>
		Most of the the slaves in the club have natural unmodded bodies.<br>
	<<else>>
		<<set _girls = 0>>
		Some girls in the club have piercings or tattoos, some do not and others have both.<br>
	<</if>>
	<<if _pref == 0>> /*customers don't care*/
	<<elseif ($clubAdsSpending > 0)>>
		<<if (_ads == _pref) && (_girls == _ads)>>
			<<set _adsIncome = _DL*random(20,30), $cash += _adsIncome, $facility.club.adsIncome += _adsIncome, _clubBonuses++>>
			Its advertising for <<if _ads == 1>>heavily modded <<elseif _ads == -1>>natural bodied <</if>>girls matched most customers' preferences and the girls in the club matched its advertisements. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<elseif (_ads == _pref) && (_girls != _ads)>>
			Its advertising for <<if _ads == 1>>heavily modded <<elseif _ads == -1>>natural bodied <</if>>girls matched most customers preferences, but the girls in the club did not. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<<elseif (_girls == _pref) && (_girls != _ads)>>
			The <<if _girls == 1>>heavily modded <<elseif _girls == -1>>natural bodied <</if>>girls in the club did not match its advertisements, but since the girls in the club matched most customers preferences for <<if _pref == 1>>heavily modded <<elseif _pref == -1>>natural bodied <</if>>girls, your reputation was not affected.
		<<elseif (_girls != _pref)>>
			Some customers were put off since the <<if _girls == 1>>heavily modded <<elseif _girls == -1>>natural bodied <</if>>girls there did not match most customers preferences for <<if _pref == 1>>heavily modded <<elseif _pref == -1>>natural bodied <</if>>girls. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<<else>>	
		<<if (_girls == _pref)>>
			The <<if _girls == 1>>heavily modded <<elseif _girls == -1>>natural bodied <</if>>girls in the club match most customers' preferences for <<if _pref == 1>>heavily modded <<elseif _pref == -1>>natural unmodded <</if>>girls. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<else>>
			Some customers were put off since the <<if _girls == 1>>heavily modded <<elseif _girls == -1>>natural bodied <</if>>girls there did not match most customers preferences for <<if _pref == 1>>heavily modded <<elseif _pref == -1>>natural bodied <</if>>girls. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<</if>>

	<<if ($clubAdsSpending > 0)>>
		<<if $clubAdsImplanted == 1>>
			Its advertisements feature girls that are augmented by implants or improved surgically.
			<<set _ads = 1>>
		<<elseif $clubAdsImplanted == -1>>
			Its advertisements feature girls that have all natural bodies.
			<<set _ads = -1>>
		<<else>>
			Its advertisements feature some girls that are surgically improved and implanted and some that are all-natural.
			<<set ads = 0>>
		<</if>>
	<</if>>
	<<if ($arcologies[0].FSTransformationFetishist != "unset") && ($arcologies[0].FSDegradationist >= 80)>>
		Most customers prefer heavily implanted and surgically enhanced girls.
		<<set _pref = 1>>
	<<elseif ($arcologies[0].FSBodyPurist != "unset") && ($arcologies[0].FSBodyPurist >= 80) >>
		Most customers prefer all-natural girls.
		<<set _pref = -1>>
	<<else>>
    	<<if ($arcologies[0].FSTransformationFetishist == "unset") && ($arcologies[0].FSBodyPurist == "unset")>>
        	<<if ($clubAdsSpending == 0) || ($clubAdsImplanted == 0)>>
        		<<set _possibleBonuses++>>
        		<<if (_implanted > 0) && (_pure > 0) && (Math.abs(_implanted-_pure) <= (_DL/3))>>
        		<<set $repGain += _DL*random(5,10), $clubBonuses++>>
        		Citizens in $clubName can easily find @@.yellowgreen;both@@ all-natural girls, and slaves whose beauty has been improved by surgical means.
        		<</if>>
        	<</if>>
    	<</if>>
		Most customers don't have preferences for either all-natural or surgically enhanced and implanted girls.
		<<set _pref = 0>>
	<</if>>
	<<if (_implanted > (_DL/2))>>
		<<set _girls = -1>>
		Most of the the slaves in the club are heavily implanted or surgically enhanced.<br>
	<<elseif (_pure > (_DL/2))>>
		<<set _girls = 1>>
		Most of the the slaves in the club have naturally pure bodies.<br>
	<<else>>
		<<set _girls = 0>>
		The slaves in the club vary in body modification.<br>
	<</if>>
	<<if _pref == 0>> /*customers don't care*/
	<<elseif ($clubAdsSpending > 0)>>
		<<if (_ads == _pref) && (_girls == _ads)>>
			<<set _adsIncome = _DL*random(20,30), $cash += _adsIncome, $facility.club.adsIncome += _adsIncome, _clubBonuses++>>
			Its advertising for <<if _ads == 1>>implanted or surgically improved <<elseif _ads == -1>>naturally pure <</if>>girls matched most customers' preferences and the girls in the club matched its advertisements. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<elseif (_ads == _pref) && (_girls != _ads)>>
			Its advertising for <<if _ads == 1>>implanted or surgically improved <<elseif _ads == -1>>naturally pure <</if>>girls matched most customers preferences, but the girls in the club did not. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<<elseif (_girls == _pref) && (_girls != _ads)>>
			The <<if _girls == 1>>implanted or surgically improved <<elseif _girls == -1>>naturally pure <</if>>girls in the club did not match its advertisements, but since the girls in the club matched most customers preferences for <<if _pref == 1>>implanted or surgically improved <<elseif _pref == -1>>naturally pure <</if>>girls, your reputation was not affected.
		<<elseif (_girls != _pref)>>
			Some customers were put off since the <<if _girls == 1>>implanted and surgically improved <<elseif _girls == -1>>naturally pure <</if>>girls there did not match their preferences for <<if _pref == 1>>implanted or surgically improved <<elseif _pref == -1>>naturally pure <</if>>girls. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<<else>>	
		<<if (_girls == _pref)>>
			The <<if _girls == 1>>implanted or surgically improved <<elseif _girls == -1>>naturally pure <</if>>girls in the club match most customers' preferences for <<if _pref == 1>>implanted or surgically improved <<elseif _pref == -1>>natural unmodded <</if>>girls. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<else>>
			Some customers were put off since the <<if _girls == 1>>implanted and surgically improved <<elseif _girls == -1>>naturally pure <</if>>girls there did not match their preferences for <<if _pref == 1>>implanted or surgically improved <<elseif _pref == -1>>naturally pure <</if>>girls. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<</if>>

	<<if ($seeDicks != 0)>>
        <<if ($clubAdsSpending > 0)>>
			<<if ($clubAdsXX == 1)>>
				Its advertisements feature girls with female genitalia.
				<<set _ads = 1>>
			<<elseif ($clubAdsXX == -1)>>
				Its advertisements feature girls with male genitalia.
				<<set _ads = -1>>
			<<else>>
				Its advertisements feature a variety of girls with both male and female genitalia.
				<<set _ads = 0>>
			<</if>>
		<</if>>
    	<<if ($arcologies[0].FSGenderFundamentalist != "unset") && ($arcologies[0].FSGenderFundamentalist >= 80)>>
			Most customers prefer girls with pussies.
			<<set _pref = 1>>
		<<elseif ($arcologies[0].FSGenderRadicalist != "unset") && ($arcologies[0].FSGenderRadicalist >= 80)>>
			Most customers prefer girls with dicks.
			<<set _pref = -1>>
		<<else>>
			<<if ($clubAdsSpending == 0) || ($clubAdsXX == 0)>>
				<<set _possibleBonuses++>>
				<<if (_XX > 0) && (_XY > 0) && (Math.abs(_XX-_XY) <= (_DL/3))>>
				<<set $repGain += _DL*random(5,10), $clubBonuses++>>
				The club offers a @@.green;mix@@ of sluts that can appeal to varied tastes in genitalia.
				<</if>>
			<</if>>
			Most customers don't have preferences for either girls with dicks or girls with pussies.
			<<set _pref = 0>>
		<</if>>
		<<if (_XX > (_DL/2))>>
			<<set _girls = 1>>
			Most of the the slaves in the club have female genitalia.<br>
		<<elseif (_XY > (_DL/2))>>
			Most of the the slaves in the club have male genitalia.<br>
			<<set _girls = -1>>
		<<else>>
			<<set _girls = 0>>
			The slaves in the club vary in genitalia.<br>
		<</if>>
		<<if _pref == 0>> /*customers don't care*/
		<<elseif ($clubAdsSpending > 0) >>
			<<if (_ads == _pref) && (_girls == _ads)>>
				<<set _adsIncome = _DL*random(20,30), $cash += _adsIncome, $facility.club.adsIncome += _adsIncome, _clubBonuses++>>
				Its advertising for girls <<if _ads == 1>>with pussies <<elseif _ads == -1>>with dicks <</if>> matches most customers' preferences as advertised. Your @@.green;reputation@@ increased slightly as a result.
				<<set $rep += random(_minBonus,_maxBonus)>>
			<<elseif (_ads == _pref) && (_girls != _ads)>>
				Its advertising for girls <<if _ads == 1>>with pussies <<elseif _ads == -1>>with dicks <</if>> matched most customers preferences, but the girls in the club are not as advertised. Your @@.red;reputation@@ dropped slightly as a result.
				<<set $rep -= random(_minBonus,_maxBonus)>>
			<<elseif (_girls == _pref) && (_girls != _ads)>>
				The girls <<if _girls == 1>> with pussies<<elseif _girls == -1>> with dicks<</if>>in the club did not match the advertisements, but since the girls in the club matched most customers preferences for girls<<if _pref == 1>> with pussies<<elseif _pref == -1>> with dicks<</if>>, your reputation was not affected.
			<<elseif (_girls != _pref)>>
				Some customers were put off since the girls <<if _girls == 1>>with female genitalia <<elseif _girls == -1>>with male genitalia <</if>> did not match their preferences for girls<<if _pref == 1>> with pussies<<elseif _pref == -1>> with dicks<</if>>. Your @@.red;reputation@@ dropped slightly as a result.
				<<set $rep -= random(_minBonus,_maxBonus)>>
			<</if>>
        	<br>
		<<else>>	
			<<if (_girls == _pref)>>
				The girls in the club match most customers preferences for girls <<if _girls == 1>>with female genitalia <<elseif _girls == -1>>with male genitalia <</if>>. Your @@.green;reputation@@ increased slightly as a result.
				<<set $rep += random(_minBonus,_maxBonus)>>
			<<else>>
				Some customers were put off since the girls <<if _girls == 1>>with female genitalia <<elseif _girls == -1>>with male genitalia <</if>> did not match their preferences for girls<<if _pref == 1>> with pussies<<elseif _pref == -1>> with dicks<</if>>. Your @@.red;reputation@@ dropped slightly as a result.
				<<set $rep -= random(_minBonus,_maxBonus)>>
			<</if>>
	        <br>
		<</if>>
	<</if>>

	<<if ($clubAdsSpending > 0)>>
		<<switch ($clubAdsOld == 0)>>
			<<case 1>>
				Its advertisements feature mature slaves.
				<<set _ads = 1>>
			<<case -1>>
				Its advertisements feature young slaves.
				<<set _ads = -1>>
			<<case -2>>
				Its advertisements feature teenagers.
				<<set _ads = -1>>
			<<case -3>>
				Its advertisements feature lolis.
				<<set _ads = -1>>
			<<default>>
				Its advertisements feature slaves of a variety of ages.
				<<set _ads = 0>>
		<</switch>>
	<</if>>
	<<if ($arcologies[0].FSMaturityPreferentialist != "unset") && ($arcologies[0].FSMaturityPreferentialist >= 80)>>
		Most customers prefer mature girls.
		<<set _pref = 1>>
	<<elseif ($arcologies[0].FSYouthPreferentialist != "unset") && ($arcologies[0].FSYouthPreferentialist >= 80)>>
		Most customers prefer young girls.
		<<set _pref = -1>>
	<<else>>
    	<<if ($arcologies[0].FSMaturityPreferentialist == "unset") && ($arcologies[0].FSYouthPreferentialist == "unset")>>
        	<<if ($clubAdsSpending == 0) || ($clubAdsOld == 0)>>
        		<<set _possibleBonuses++>>
        		<<if (_young > 0) && (_old > 0) && (Math.abs(_young-_old) <= (_DL/3))>>
        		<<set $repGain += _DL*random(5,10), $clubBonuses++>>
        		There are girls @@.green;both@@ young and mature in $clubName.
        		<</if>>
        	<</if>>
        <</if>>
	    Most customers don't have preferences for either mature or young girls.
		<<set _pref = 0>>
	<</if>>
	<<if (_old > (_DL/2))>>
		<<set _girls = 1>>
		Most of the the slaves in the club are mature.<br>
	<<elseif (_young > (_DL/2))>>
		<<set _girls = -1>>
		Most of the the slaves in the club are young.<br>
	<<else>>
		<<set _girls = 0>>
		The slaves in the club vary in age.<br>
	<</if>>
	<<if _pref == 0>> /*customers don't care*/
	<<elseif ($clubAdsSpending > 0)>>
		<<if (_ads == _pref) && (_girls == _ads)>>
			<<set _adsIncome = _DL*random(20,30), $cash += _adsIncome, $facility.club.adsIncome += _adsIncome, _clubBonuses++>>
			Its advertising matches most customers' age preferences and the girls in the club match the ages as advertised. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<elseif (_ads == _pref) && (_girls != _ads)>>
			Its advertising matched most customers age preferences, but the girls in the club do not. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<<elseif (_girls == _pref) && (_girls != _ads)>>
			The ages of girls in the club did not match the ages as advertised, but since the girls in the club matched most customers age preferences, your reputation was not affected.
		<<elseif (_girls != _pref) && (_girls == _ads)>>
			Some customers were put off since the ages of girls there did not match their preferences. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<<else>>	
		<<if (_girls == _pref)>>
			The girls in the club match most customers' age preferences. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<else>>
			Some customers were put off since the ages of girls there did not match their preferences. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<</if>>

	<<if ($clubAdsSpending > 0)>>
		<<if $clubAdsPreg == 1>>
			Its advertisements feature girls that have firm, rounded bellies.
			<<set _ads = 1>>
		<<elseif $clubAdsPreg == -1>>
			Its advertisements feature girls have firm, flat bellies.
			<<set _ads = -1>>
		<<else>>
			Its advertisements feature some girls that are pregnant.
			<<set _ads = 0>>
		<</if>>
	<</if>>
	<<if ($arcologies[0].FSRepopulationFocus != "unset") && ($arcologies[0].FSRepopulationFocus >= 80)>>
		Most customers prefer girls with big bellies.
		<<set _pref = 1>>
	<<elseif  ($arcologies[0].FSRestart != "unset") && ($arcologies[0].FSRestart >= 80) >>
		Most customers prefer girls with flat bellies.
		<<set _pref = -1>>
	<<else>>
    	<<if ($arcologies[0].FSRepopulationFocus == "unset") && ($arcologies[0].FSRestart == "unset")>>
        	<<if ($clubAdsSpending == 0) || ($clubAdsPreg == 0)>>
        		<<set _possibleBonuses++>>
        		<<if (_pregYes > 0) && (_pregNo > 0) && (Math.abs(_pregYes-_pregNo) <= (_DL/3))>>
        		<<set $repGain += _DL*random(5,10), $clubBonuses++>>
        		There is a @@.green;wide@@ variety of slaves with swollen, round bellies and flat bellies working the club.
        		<</if>>
        	<</if>>
    	<</if>>
		Most customers don't have preferences for either big-bellied or flat-bellied girls.
		<<set _pref = 0>>
    <</if>>
    <<if (_pregNo > (_DL/2))>>
		<<set _girls = -1>>
		Most of the the slaves in the club have flat bellies.<br>
	<<elseif (_pregYes > (_DL/2))>>
		<<set _girls = 1>>
		Most of the the slaves in the club have big bellies.<br>
	<<else>>
		<<set _girls = 0>>
		The slaves in the club vary in belly size.<br>
	<</if>>
	<<if (_pref != 0)>> /*customers don't care*/
	<<elseif ($clubAdsSpending > 0)>>
		<<if (_ads == _pref) && (_girls == _ads)>>
			<<set _adsIncome = _DL*random(20,30), $cash += _adsIncome, $facility.club.adsIncome += _adsIncome, _clubBonuses++>>
			Its advertising for <<if _ads == 1>>big-bellied <<elseif _ads == -1>>flat-bellied <</if>>girls matched most customers' preferences and the girls in the club matched its advertisements. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<elseif (_ads == _pref) && (_girls != _ads)>>
			Its advertising for <<if _ads == 1>>big-bellied <<elseif _ads == -1>>flat-bellied <</if>>girls matched most customers preferences, but the girls in the club did not. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<<elseif (_girls == _pref) && (_girls != _ads)>>
			The <<if _girls == 1>>big-bellied <<elseif _girls == -1>>flat-bellied <</if>>girls in the club did not match its advertisements, but since the girls in the club matched most customers preferences for <<if _pref == 1>>big-bellied <<elseif _pref == -1>>flat-bellied <</if>>girls, your reputation was not affected.
		<<elseif (_girls != _pref)>>
			Some customers were put off since the <<if _girls == 1>>big-bellied <<elseif _girls == -1>>flat-bellied <</if>>girls in the club did not match their preferences for <<if _pref == 1>>big-bellied <<elseif _pref == -1>>flat-bellied <</if>>girls. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<<else>>	
		<<if (_girls == _pref)>>
			The <<if _girls == 1>>big-bellied <<elseif _girls == -1>>flat-bellied <</if>>girls in the club match most customers' preferences for <<if _pref == 1>>big-bellied <<elseif _pref == -1>>flat-bellied <</if>>girls. Your @@.green;reputation@@ increased slightly as a result.
			<<set $rep += random(_minBonus,_maxBonus)>>
		<<else>>
			Some customers were put off since the <<if _girls == 1>>big-bellied <<elseif _girls == -1>>flat-bellied <</if>>girls in the club did not match their preferences for <<if _pref == 1>>big-bellied <<elseif _pref == -1>>flat-bellied <</if>>girls. Your @@.red;reputation@@ dropped slightly as a result.
			<<set $rep -= random(_minBonus,_maxBonus)>>
		<</if>>
		<br>
	<</if>>

	<<if (_possibleBonuses > 0) && ($clubBonuses >= _possibleBonuses)>>
		<<set $repGain += _DL*random(10,15)>>
		There is a ''@@.green;perfect variety@@'' of slaves serving the public from $clubName.
	<<else>>
		$clubNameCaps does not offer enough variety to satisfy all visitors.
	<</if>>
	<!-- Record statistics gathering -->
	<<script>>
		var b = State.variables.facility.club;
		b.whoreIncome = 0;
		b.customers = 0;
		b.whoreCosts = 0;
		b.rep = 0;
		for(var si of b.income.values()) {
			b.whoreIncome += si.income;
			b.customers += si.customers;
			b.whoreCosts += si.cost;
			b.rep += si.rep;
		}
		b.adsCosts = State.variables.clubAdsSpending;
		b.maintenance = State.variables.club * State.variables.facilityCost * (1.0 + 0.2 * State.variables.clubUpgradePDAs);
		b.totalIncome = b.whoreIncome + b.adsIncome;
		b.totalExpenses = b.whoreCosts + b.adsCosts + b.maintenance;
		b.profit = b.totalIncome / b.totalExpenses;
	<</script>>
	<<if $clubDecoration != "standard">>
		$clubNameCaps's customers enjoy @@.green;having sex in $clubDecoration surroundings.@@
	<</if>>

	<!-- Statistics output -->
	<<ClubStatistics 0>>
	<<timed 50ms>>
		<<replace #clubstats>>
			<<ClubStatistics 1>>
		<</replace>>
	<</timed>>
<</if>>

<<if _DL > 0 || $DJ != 0>>
	<br><br>
<</if>>

