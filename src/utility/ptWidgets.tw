:: PT widgets [widget nobr]

<<widget "InduceFlawAbuseEffects">>
<<if $activeSlave.devotion > 20>>
	She's @@.mediumorchid;desperately confused@@ by this treatment, since the effect would be ruined if you explained it to her, and her @@.gold;trust in you is reduced.@@
<<elseif $activeSlave.devotion >= -20>>
	She's @@.mediumorchid;confused, depressed@@ and @@.gold;frightened@@ by this treatment, since the effect would be ruined if you explained it to her.
<<else>>
	She's @@.mediumorchid;angry@@ and @@.gold;afraid@@ that you would treat her like this.
<</if>>
<<if $activeSlave.energy > 10>>
	Her @@.red;appetite for sex is also reduced.@@
	<<set $activeSlave.energy -= 2>>
<</if>>
<<set $activeSlave.devotion -= 5>>
<<set $activeSlave.trust -= 5>>
<</widget>>

<<widget "InduceFlawLenityEffects">>
<<if $activeSlave.devotion <= 20>>
	She doesn't understand what you intend by this strange treatment, but it does make her @@.mediumaquamarine;inappropriately trusting.@@
	<<set $activeSlave.trust += 5>>
<</if>>
<</widget>>

<<widget "BasicTrainingDefaulter">>
	<br>&nbsp;&nbsp;&nbsp;&nbsp;
	<<set _pti = $personalAttention.findIndex(function(s) { return s.ID == $activeSlave.ID; })>>
	<<if ($activeSlave.devotion > 20) && ($activeSlave.behavioralFlaw != "none") && ($activeSlave.behavioralQuirk == "none") && ($activeSlave.behavioralQuirk != "cum addict") && ($activeSlave.behavioralQuirk != "anal addict") && ($activeSlave.behavioralQuirk != "attention whore") && ($activeSlave.behavioralQuirk != "breast growth") && ($activeSlave.behavioralQuirk != "abusive") && ($activeSlave.behavioralQuirk != "malicious") && ($activeSlave.behavioralQuirk != "self hating") && ($activeSlave.behavioralQuirk != "neglectful") && ($activeSlave.behavioralQuirk != "breeder")>>
		Since she's obedient, @@.yellow;her training assignment has defaulted to softening her behavioral flaw.@@
		<<set $personalAttention[_pti].trainingRegimen = "soften her behavioral flaw">>
	<<elseif ($activeSlave.devotion > 20) && ($activeSlave.sexualFlaw != "none") && ($activeSlave.sexualQuirk == "none")>>
		Since she's obedient, @@.yellow;her training assignment has defaulted to softening her sexual flaw.@@
		<<set $personalAttention[_pti].trainingRegimen = "soften her sexual flaw">>
	<<elseif ($activeSlave.devotion > 20) && ($activeSlave.behavioralFlaw != "none") && ($activeSlave.behavioralQuirk != "cum addict") && ($activeSlave.behavioralQuirk != "anal addict") && ($activeSlave.behavioralQuirk != "attention whore") && ($activeSlave.behavioralQuirk != "breast growth") && ($activeSlave.behavioralQuirk != "abusive") && ($activeSlave.behavioralQuirk != "malicious") && ($activeSlave.behavioralQuirk != "self hating") && ($activeSlave.behavioralQuirk != "neglectful") && ($activeSlave.behavioralQuirk != "breeder")>>
		Since she's obedient and already has a behavioral quirk, @@.yellow;her training assignment has defaulted to removing her behavioral flaw.@@
		<<set $personalAttention[_pti].trainingRegimen = "fix her behavioral flaw">>
	<<elseif ($activeSlave.devotion > 20) && ($activeSlave.sexualFlaw != "none")>>
		Since she's obedient and already has a sexual quirk, @@.yellow;her training assignment has defaulted to removing her sexual flaw.@@
		<<set $personalAttention[_pti].trainingRegimen = "fix her sexual flaw">>
	<<elseif ($activeSlave.devotion <= 20) && ($activeSlave.trust > -20)>>
		@@.yellow;Her training assignment has defaulted to breaking her will.@@
		<<set $personalAttention[_pti].trainingRegimen = "break her will">>
	<<else>>
		She is now fully broken; @@.yellow;her training assignment has defaulted to fostering devotion.@@
		<<set $personalAttention[_pti].trainingRegimen = "build her devotion">>
	<</if>>
	<<set _ptw = $slaves.findIndex(function(s) { return s.ID == $activeSlave.ID; })>>
	<<set $activeSlave.training = 0, $slaves[_ptw].training = 0>>
<</widget>>
