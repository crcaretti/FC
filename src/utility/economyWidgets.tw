:: economy widgets [widget nobr]

<<widget "BrothelStatistics">>
	<<if (!$facility || !$facility.brothel)>>
		<h4>- No statistics for $brothelName gathered this week -</h4>
	<<else>>
		<<set _details = $args[0]>>
		<table border="1" style="width: 100%; padding-left: 20px; padding-right: 20px;">
		<tr style="border-bottom: 2px solid white;"><th>Items</th><th style="width: 7.2em">Revenue</th><th style="width: 7.2em">Expenses</th><th style="width: 7.2em">Net Income</th></tr>
		<tr><td>Total whoring income</td><td style="padding-right: 5px; text-align: right">@@color:yellowgreen;¤$facility.brothel.whoreIncome@@</td><td></td><td style="padding-right: 5px; text-align: right">@@color:yellowgreen;¤$facility.brothel.whoreIncome@@</td></tr>
		<tr><td>Total whore living costs</td><td></td><td style="padding-right: 5px; text-align: right">@@color:red;¤$facility.brothel.whoreCosts@@</td><td style="padding-right: 5px; text-align: right">@@color:red;¤-$facility.brothel.whoreCosts@@</td></tr>
		<<if _details>>
		<tr><td colspan="3"><b>Whore details</b>
		<div style="padding-left: 20px;">
		<table style="width: 100%; font-size: 90%; line-height: 110%;"><tr><th>Whore</th><th style="width: 8em">Customers</th><th style="width: 8em">Revenue</th><th style="width: 8em">Expenses</th><th style="width: 8em">Net Income</th></tr>
		<<set _slaveDetails = $facility.brothel.income.values()>>
		<<set _slaveInfo = _slaveDetails.next()>>
		<<for !_slaveInfo.done>>
			<<set _netIncome = _slaveInfo.value.income - _slaveInfo.value.cost>>
			<tr><td><<if (_slaveInfo.value.customLabel)>>(@@color:yellow;''_slaveInfo.value.customLabel''@@) <</if>>_slaveInfo.value.slaveName</td><td style="padding-right: 5px; text-align: right"><<if (_slaveInfo.value.customers <= 0)>>@@color:red;none@@<<else>>_slaveInfo.value.customers<</if>></td><td style="padding-right: 5px; text-align: right">@@color:yellowgreen;¤_slaveInfo.value.income@@</td><td style="padding-right: 5px; text-align: right">@@color:red;¤_slaveInfo.value.cost@@</td><td style="padding-right: 5px; text-align: right"><<if (_netIncome > 0)>>@@color:yellowgreen;¤_netIncome@@<<elseif (_netIncome < 0)>>@@color:red;¤_netIncome@@<<else>>¤_netIncome<</if>></td></tr>
			<<set _slaveInfo = _slaveDetails.next()>>
		<</for>>
		</table></div></td><td></td></tr>
		<</if>>
		<tr><td>Additional income</td><td style="padding-right: 5px; text-align: right">@@color:yellowgreen;¤$facility.brothel.adsIncome@@</td><td></td><td style="padding-right: 5px; text-align: right">@@color:yellowgreen;¤$facility.brothel.adsIncome@@</td></tr>
		<tr><td>Brothel maintenance</td><td></td><td style="padding-right: 5px; text-align: right">@@color:red;¤$facility.brothel.maintenance@@</td><td style="padding-right: 5px; text-align: right">@@color:red;¤-$facility.brothel.maintenance@@</td></tr>
		<<if ($facility.brothel.adsCosts > 0)>>
		<tr><td>Advertisement program</td><td></td><td style="padding-right: 5px; text-align: right">@@color:red;¤$facility.brothel.adsCosts@@</td><td style="padding-right: 5px; text-align: right">@@color:red;¤-$facility.brothel.adsCosts@@</td></tr>
		<</if>>
		<tr style="border-top: 1px solid white;"><th>Total</th><td style="padding-right: 5px; text-align: right">@@color:yellowgreen;¤$facility.brothel.totalIncome@@</td><td style="padding-right: 5px; text-align: right">@@color:red;¤$facility.brothel.totalExpenses@@</td><td style="padding-right: 5px; text-align: right"><b><<if ($facility.brothel.profit > 0)>>@@color:yellowgreen;¤$facility.brothel.profit@@<<elseif ($facility.brothel.profit < 0)>>@@color:red;¤$facility.brothel.profit@@<<else>>¤$facility.brothel.profit<</if>></b></td></tr>
		</table>
	<</if>>
<</widget>>
